import{d as te,l as ae,N as he,P as ke,E as p,b as I,aa as Me,ag as ve,m as re,V as Ce,a7 as Ie,o as O,e as ie,q,n as z,a3 as Ne,ah as De,a6 as pe,r as Pe,z as Ae,a9 as Oe,ai as Re,y as Ke,c as G,G as x,w as L,aj as Be,W as X,L as Z,i as ee,t as H,f as N,ak as Ve,al as Ue,$ as Ge,am as Se,A as ce,an as Ze,h as $e,a2 as He,a4 as Je,a5 as Ye}from"./index.c7a3d020.js";import{g as we,s as Le}from"./get-value-by-path.1735d967.js";import{R as Qe,b as Xe}from"./index.810987a0.js";const et=te({name:"Form",props:{model:{type:Object,required:!0},layout:{type:String,default:"horizontal"},size:{type:String},labelColProps:{type:Object,default:()=>({span:5,offset:0})},wrapperColProps:{type:Object,default:()=>({span:19,offset:0})},labelColStyle:Object,wrapperColStyle:Object,labelAlign:{type:String,default:"right"},disabled:{type:Boolean,default:void 0},rules:{type:Object},autoLabelWidth:{type:Boolean,default:!1}},emits:{submit:(e,t)=>!0,submitSuccess:(e,t)=>!0,submitFailed:(e,t)=>!0},setup(e,{emit:t}){const r=ae("form"),{model:a,layout:i,disabled:l,labelAlign:o,labelColProps:u,wrapperColProps:j,labelColStyle:v,wrapperColStyle:E,size:W,rules:m}=he(e),{mergedSize:S}=ke(W),K=p(()=>e.layout==="horizontal"&&e.autoLabelWidth),g=[],f=[],h=I({}),T=p(()=>Math.max(...Object.values(h))),k=n=>{n&&n.field&&g.push(n)},J=n=>{n&&n.field&&g.splice(g.indexOf(n),1)},oe=n=>{g.forEach(d=>{n[d.field]&&d.setField(n[d.field])})},Y=(n,d)=>{d&&h[d]!==n&&(h[d]=n)},P=n=>{n&&delete h[n]},ne=n=>{const d=n?[].concat(n):[];g.forEach(b=>{(d.length===0||d.includes(b.field))&&b.resetField()})},A=n=>{const d=n?[].concat(n):[];g.forEach(b=>{(d.length===0||d.includes(b.field))&&b.clearValidate()})},ue=n=>{const d=[];return g.forEach(b=>{d.push(b.validate())}),Promise.all(d).then(b=>{const y={};let C=!1;return b.forEach(s=>{s&&(C=!0,y[s.field]=s)}),Ce(n)&&n(C?y:void 0),C?y:void 0})},Q=(n,d)=>{const b=[];for(const y of g)(Ie(n)&&n.includes(y.field)||n===y.field)&&b.push(y.validate());return Promise.all(b).then(y=>{const C={};let s=!1;return y.forEach(c=>{c&&(s=!0,C[c.field]=c)}),Ce(d)&&d(s?C:void 0),s?C:void 0})},B=n=>{const d=[];g.forEach(b=>{d.push(b.validate())}),Promise.all(d).then(b=>{const y={};let C=!1;b.forEach(s=>{s&&(C=!0,y[s.field]=s)}),C?t("submitFailed",{values:a.value,errors:y},n):t("submitSuccess",a.value,n),t("submit",{values:a.value,errors:C?y:void 0},n)})};return Me(ve,I({layout:i,disabled:l,labelAlign:o,labelColProps:u,wrapperColProps:j,labelColStyle:v,wrapperColStyle:E,model:a,size:S,rules:m,fields:g,touchedFields:f,addField:k,removeField:J,validateField:Q,setLabelWidth:Y,removeLabelWidth:P,maxLabelWidth:T,autoLabelWidth:K})),{cls:p(()=>[r,`${r}-layout-${e.layout}`,`${r}-size-${S.value}`,{[`${r}-auto-label-width`]:e.autoLabelWidth}]),handleSubmit:B,innerValidate:ue,innerValidateField:Q,innerResetFields:ne,innerClearValidate:A,innerSetFields:oe}},methods:{validate(e){return this.innerValidate(e)},validateField(e,t){return this.innerValidateField(e,t)},resetFields(e){return this.innerResetFields(e)},clearValidate(e){return this.innerClearValidate(e)},setFields(e){return this.innerSetFields(e)}}});function tt(e,t,r,a,i,l){return O(),ie("form",{class:z(e.cls),onSubmit:t[0]||(t[0]=Ne((...o)=>e.handleSubmit&&e.handleSubmit(...o),["prevent"]))},[q(e.$slots,"default")],34)}var de=re(et,[["render",tt]]),D=Object.prototype.toString;function se(e){return D.call(e)==="[object Array]"}function M(e){return D.call(e)==="[object Object]"}function ge(e){return D.call(e)==="[object String]"}function at(e){return D.call(e)==="[object Number]"&&e===e}function rt(e){return D.call(e)==="[object Boolean]"}function be(e){return D.call(e)==="[object Function]"}function it(e){return M(e)&&Object.keys(e).length===0}function R(e){return e==null||e===""}function ze(e){return se(e)&&!e.length}var me=function(e,t){if(typeof e!="object"||typeof t!="object")return e===t;if(be(e)&&be(t))return e===t||e.toString()===t.toString();if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e){var a=me(e[r],t[r]);if(!a)return!1}return!0},st=function(e,t){var r={};return Object.keys(e).forEach(function(a){var i=e[a],l=t&&t[a];r[a]=M(i)?Object.assign(Object.assign({},i),l):l||i}),r},lt=function(e,t){for(var r=t.split("."),a=e,i=0;i<r.length;i++)if(a=a&&a[r[i]],a===void 0)return a;return a},_="#{field} is not a #{type} type",ot={required:"#{field} is required",type:{ip:_,email:_,url:_,string:_,number:_,array:_,object:_,boolean:_},number:{min:"`#{value}` is not greater than `#{min}`",max:"`#{value}` is not less than `#{max}`",equal:"`#{value}` is not equal to `#{equal}`",range:"`#{value}` is not in range `#{min} ~ #{max}`",positive:"`#{value}` is not a positive number",negative:"`#{value}` is not a negative number"},string:{maxLength:"#{field} cannot be longer than #{maxLength} characters",minLength:"#{field} must be at least #{minLength} characters",length:"#{field} must be exactly #{length} characters",match:"`#{value}` does not match pattern #{pattern}",uppercase:"`#{value}` must be all uppercase",lowercase:"`#{value}` must be all lowercased"},array:{length:"#{field} must be exactly #{length} in length",minLength:"#{field} cannot be less than #{minLength} in length",maxLength:"#{field} cannot be greater than #{maxLength} in length",includes:"#{field} is not includes #{includes}",deepEqual:"#{field} is not deep equal with #{deepEqual}",empty:"#{field} is not an empty array"},object:{deepEqual:"#{field} is not deep equal to expected value",hasKeys:"#{field} does not contain required fields",empty:"`#{field} is not an empty object"},boolean:{true:"Expect true but got `#{value}`",false:"Expect false but got `#{value}`"}},V=function(t,r){var a=this;this.getValidateMsg=function(i,l){l===void 0&&(l={});var o=Object.assign(Object.assign({},l),{value:a.obj,field:a.field,type:a.type}),u=lt(a.validateMessages,i);return be(u)?u(o):ge(u)?u.replace(/\#\{.+?\}/g,function(j){var v=j.slice(2,-1);if(v in o){if(M(o[v])||se(o[v]))try{return JSON.stringify(o[v])}catch{return o[v]}return String(o[v])}return j}):u},M(r)&&ge(t)&&r.trim?this.obj=t.trim():M(r)&&r.ignoreEmptyString&&t===""?this.obj=void 0:this.obj=t,this.message=r.message,this.type=r.type,this.error=null,this.field=r.field||r.type,this.validateMessages=st(ot,r.validateMessages)},le={not:{configurable:!0},isRequired:{configurable:!0},end:{configurable:!0}};le.not.get=function(){return this._not=!this._not,this};le.isRequired.get=function(){return(R(this.obj)||ze(this.obj))&&(this.error={value:this.obj,type:this.type,requiredError:!0,message:this.message||(this._not?"[NOT MODE]:":"")+this.getValidateMsg("required")}),this};le.end.get=function(){return this.error};V.prototype.addError=function(t){!this.error&&t&&(this.error={value:this.obj,type:this.type,message:this.message||(M(t)?t:(this._not?"[NOT MODE]:":"")+t)})};V.prototype.validate=function(t,r){var a=this._not?t:!t;return a&&this.addError(r),this};V.prototype.collect=function(t){t&&t(this.error)};Object.defineProperties(V.prototype,le);var nt=function(e){function t(a,i){e.call(this,a,Object.assign(Object.assign({},i),{type:"string"})),this.validate(i&&i.strict?ge(this.obj):!0,this.getValidateMsg("type.string"))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={uppercase:{configurable:!0},lowercase:{configurable:!0}};return t.prototype.maxLength=function(i){return this.obj?this.validate(this.obj.length<=i,this.getValidateMsg("string.maxLength",{maxLength:i})):this},t.prototype.minLength=function(i){return this.obj?this.validate(this.obj.length>=i,this.getValidateMsg("string.minLength",{minLength:i})):this},t.prototype.length=function(i){return this.obj?this.validate(this.obj.length===i,this.getValidateMsg("string.length",{length:i})):this},t.prototype.match=function(i){var l=i instanceof RegExp;return l&&(i.lastIndex=0),this.validate(this.obj===void 0||l&&i.test(this.obj),this.getValidateMsg("string.match",{pattern:i}))},r.uppercase.get=function(){return this.obj?this.validate(this.obj.toUpperCase()===this.obj,this.getValidateMsg("string.uppercase")):this},r.lowercase.get=function(){return this.obj?this.validate(this.obj.toLowerCase()===this.obj,this.getValidateMsg("string.lowercase")):this},Object.defineProperties(t.prototype,r),t}(V),ut=function(e){function t(a,i){e.call(this,a,Object.assign(Object.assign({},i),{type:"number"})),this.validate(i&&i.strict?at(this.obj):!0,this.getValidateMsg("type.number"))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={positive:{configurable:!0},negative:{configurable:!0}};return t.prototype.min=function(i){return R(this.obj)?this:this.validate(this.obj>=i,this.getValidateMsg("number.min",{min:i}))},t.prototype.max=function(i){return R(this.obj)?this:this.validate(this.obj<=i,this.getValidateMsg("number.max",{max:i}))},t.prototype.equal=function(i){return R(this.obj)?this:this.validate(this.obj===i,this.getValidateMsg("number.equal",{equal:i}))},t.prototype.range=function(i,l){return R(this.obj)?this:this.validate(this.obj>=i&&this.obj<=l,this.getValidateMsg("number.range",{min:i,max:l}))},r.positive.get=function(){return R(this.obj)?this:this.validate(this.obj>0,this.getValidateMsg("number.positive"))},r.negative.get=function(){return R(this.obj)?this:this.validate(this.obj<0,this.getValidateMsg("number.negative"))},Object.defineProperties(t.prototype,r),t}(V),ct=function(e){function t(a,i){e.call(this,a,Object.assign(Object.assign({},i),{type:"array"})),this.validate(i&&i.strict?se(this.obj):!0,this.getValidateMsg("type.array",{value:this.obj,type:this.type}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={empty:{configurable:!0}};return t.prototype.length=function(i){return this.obj?this.validate(this.obj.length===i,this.getValidateMsg("array.length",{value:this.obj,length:i})):this},t.prototype.minLength=function(i){return this.obj?this.validate(this.obj.length>=i,this.getValidateMsg("array.minLength",{value:this.obj,minLength:i})):this},t.prototype.maxLength=function(i){return this.obj?this.validate(this.obj.length<=i,this.getValidateMsg("array.maxLength",{value:this.obj,maxLength:i})):this},t.prototype.includes=function(i){var l=this;return this.obj?this.validate(i.every(function(o){return l.obj.indexOf(o)!==-1}),this.getValidateMsg("array.includes",{value:this.obj,includes:i})):this},t.prototype.deepEqual=function(i){return this.obj?this.validate(me(this.obj,i),this.getValidateMsg("array.deepEqual",{value:this.obj,deepEqual:i})):this},r.empty.get=function(){return this.validate(ze(this.obj),this.getValidateMsg("array.empty",{value:this.obj}))},Object.defineProperties(t.prototype,r),t}(V),dt=function(e){function t(a,i){e.call(this,a,Object.assign(Object.assign({},i),{type:"object"})),this.validate(i&&i.strict?M(this.obj):!0,this.getValidateMsg("type.object"))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={empty:{configurable:!0}};return t.prototype.deepEqual=function(i){return this.obj?this.validate(me(this.obj,i),this.getValidateMsg("object.deepEqual",{deepEqual:i})):this},t.prototype.hasKeys=function(i){var l=this;return this.obj?this.validate(i.every(function(o){return l.obj[o]}),this.getValidateMsg("object.hasKeys",{keys:i})):this},r.empty.get=function(){return this.validate(it(this.obj),this.getValidateMsg("object.empty"))},Object.defineProperties(t.prototype,r),t}(V),ft=function(e){function t(a,i){e.call(this,a,Object.assign(Object.assign({},i),{type:"boolean"})),this.validate(i&&i.strict?rt(this.obj):!0,this.getValidateMsg("type.boolean"))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={true:{configurable:!0},false:{configurable:!0}};return r.true.get=function(){return this.validate(this.obj===!0,this.getValidateMsg("boolean.true"))},r.false.get=function(){return this.validate(this.obj===!1,this.getValidateMsg("boolean.false"))},Object.defineProperties(t.prototype,r),t}(V),ht=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,pt=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),gt=/^(2(5[0-5]{1}|[0-4]\d{1})|[0-1]?\d{1,2})(\.(2(5[0-5]{1}|[0-4]\d{1})|[0-1]?\d{1,2})){3}$/,bt=function(e){function t(a,i){e.call(this,a,Object.assign(Object.assign({},i),{type:"type"}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={email:{configurable:!0},url:{configurable:!0},ip:{configurable:!0}};return r.email.get=function(){return this.type="email",this.validate(this.obj===void 0||ht.test(this.obj),this.getValidateMsg("type.email"))},r.url.get=function(){return this.type="url",this.validate(this.obj===void 0||pt.test(this.obj),this.getValidateMsg("type.url"))},r.ip.get=function(){return this.type="ip",this.validate(this.obj===void 0||gt.test(this.obj),this.getValidateMsg("type.ip"))},Object.defineProperties(t.prototype,r),t}(V),vt=function(e){function t(a,i){e.call(this,a,Object.assign(Object.assign({},i),{type:"custom"}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={validate:{configurable:!0}};return r.validate.get=function(){var a=this;return function(i,l){var o;if(i)return o=i(a.obj,a.addError.bind(a)),o&&o.then?(l&&o.then(function(){l&&l(a.error)},function(u){console.error(u)}),[o,a]):(l&&l(a.error),a.error)}},Object.defineProperties(t.prototype,r),t}(V),mt=function(t,r){this.string=new nt(t,r),this.number=new ut(t,r),this.array=new ct(t,r),this.object=new dt(t,r),this.boolean=new ft(t,r),this.type=new bt(t,r),this.custom=new vt(t,r)},xe=function(t,r){r===void 0&&(r={}),this.schema=t,this.options=r};xe.prototype.validate=function(t,r){var a=this;if(!M(t))return;var i=[],l=null;function o(u,j){l||(l={}),(!l[u]||j.requiredError)&&(l[u]=j)}this.schema&&Object.keys(this.schema).forEach(function(u){if(se(a.schema[u]))for(var j=function(W){var m=a.schema[u][W],S=m.type,K=m.message;if(!S&&!m.validator)throw"You must specify a type to field "+u+"!";var g=new mt(t[u],Object.assign(Object.assign({},a.options),{message:K,field:u})),f=g.type[S]||null;if(!f)if(m.validator){f=g.custom.validate(m.validator),Object.prototype.toString.call(f)==="[object Array]"&&f[0].then?i.push({function:f[0],_this:f[1],key:u}):f&&o(u,f);return}else f=g[S];if(Object.keys(m).forEach(function(h){m.required&&(f=f.isRequired),h!=="message"&&f[h]&&m[h]&&typeof f[h]=="object"&&(f=f[h]),f[h]&&m[h]!==void 0&&typeof f[h]=="function"&&(f=f[h](m[h]))}),f.collect(function(h){h&&o(u,h)}),l)return"break"},v=0;v<a.schema[u].length;v++){var E=j(v);if(E==="break")break}}),i.length>0?Promise.all(i.map(function(u){return u.function})).then(function(){i.forEach(function(u){u._this.error&&o(u.key,u._this.error)}),r&&r(l)}):r&&r(l)};const yt=te({name:"FormItemLabel",components:{ResizeObserver:De},props:{required:{type:Boolean,default:!1},showColon:{type:Boolean,default:!1},component:{type:String,default:"label"},attrs:Object},setup(){const e=ae("form-item-label"),t=pe(ve,void 0),r=Ke(),a=Pe(),i=()=>{a.value&&Oe(a.value.offsetWidth)&&(t==null||t.setLabelWidth(a.value.offsetWidth,r==null?void 0:r.uid))};return Ae(()=>{a.value&&Oe(a.value.offsetWidth)&&(t==null||t.setLabelWidth(a.value.offsetWidth,r==null?void 0:r.uid))}),Re(()=>{t==null||t.removeLabelWidth(r==null?void 0:r.uid)}),{prefixCls:e,labelRef:a,handleResize:i}}}),jt=N("svg",{fill:"currentColor",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[N("path",{d:"M583.338667 17.066667c18.773333 0 34.133333 15.36 34.133333 34.133333v349.013333l313.344-101.888a34.133333 34.133333 0 0 1 43.008 22.016l42.154667 129.706667a34.133333 34.133333 0 0 1-21.845334 43.178667l-315.733333 102.4 208.896 287.744a34.133333 34.133333 0 0 1-7.509333 47.786666l-110.421334 80.213334a34.133333 34.133333 0 0 1-47.786666-7.509334L505.685333 706.218667 288.426667 1005.226667a34.133333 34.133333 0 0 1-47.786667 7.509333l-110.421333-80.213333a34.133333 34.133333 0 0 1-7.509334-47.786667l214.186667-295.253333L29.013333 489.813333a34.133333 34.133333 0 0 1-22.016-43.008l42.154667-129.877333a34.133333 34.133333 0 0 1 43.008-22.016l320.512 104.106667L412.672 51.2c0-18.773333 15.36-34.133333 34.133333-34.133333h136.533334z"})],-1),Ct=[jt];function Ot(e,t,r,a,i,l){const o=G("ResizeObserver");return O(),x(o,{onResize:e.handleResize},{default:L(()=>[(O(),x(Be(e.component),X({ref:"labelRef",class:e.prefixCls},e.attrs),{default:L(()=>[e.required?(O(),ie("strong",{key:0,class:z(`${e.prefixCls}-required-symbol`)},Ct,2)):Z("v-if",!0),q(e.$slots,"default"),ee(" "+H(e.showColon?":":""),1)]),_:3},16,["class"]))]),_:3},8,["onResize"])}var Vt=re(yt,[["render",Ot]]);const St=te({name:"FormItemMessage",props:{error:Array,help:String},setup(){return{prefixCls:ae("form-item-message")}}});function $t(e,t,r,a,i,l){return e.help||e.$slots.help?(O(),x(Ve,{key:0,name:"form-blink",appear:""},{default:L(()=>[N("div",{class:z([e.prefixCls,`${e.prefixCls}-help`])},[q(e.$slots,"help",{},()=>[ee(H(e.help),1)])],2)]),_:3})):(O(!0),ie(Ge,{key:1},Ue(e.error,o=>(O(),x(Ve,{key:o,name:"form-blink",appear:""},{default:L(()=>[N("div",{role:"alert",class:z([e.prefixCls])},H(o),3)]),_:2},1024))),128))}var wt=re(St,[["render",$t]]);const Ee=["success","warning","error","validating"],Lt=e=>{let t="";for(const r of Object.keys(e)){const a=e[r];a&&(!t||Ee.indexOf(a)>Ee.indexOf(t))&&(t=e[r])}return t},Et=e=>{const t=[];for(const r of Object.keys(e)){const a=e[r];a&&t.push(a)}return t};var Ft=Object.defineProperty,Fe=Object.getOwnPropertySymbols,_t=Object.prototype.hasOwnProperty,qt=Object.prototype.propertyIsEnumerable,_e=(e,t,r)=>t in e?Ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qe=(e,t)=>{for(var r in t||(t={}))_t.call(t,r)&&_e(e,r,t[r]);if(Fe)for(var r of Fe(t))qt.call(t,r)&&_e(e,r,t[r]);return e};const Mt=te({name:"FormItem",components:{ArcoRow:Qe,ArcoCol:Xe,FormItemLabel:Vt,FormItemMessage:wt},props:{field:{type:String,default:""},label:String,showColon:{type:Boolean,default:!1},noStyle:{type:Boolean,default:!1},disabled:{type:Boolean,default:void 0},help:String,extra:String,required:{type:Boolean,default:!1},rules:{type:[Object,Array]},validateStatus:{type:String},validateTrigger:{type:[String,Array],default:"change"},labelColProps:Object,wrapperColProps:Object,hideLabel:{type:Boolean,default:!1},hideAsterisk:{type:Boolean,default:!1},labelColStyle:Object,wrapperColStyle:Object,rowProps:Object,rowClass:[String,Array,Object],contentClass:[String,Array,Object],contentFlex:{type:Boolean,default:!0},mergeProps:{type:[Boolean,Function],default:!0},labelColFlex:{type:[Number,String]},feedback:{type:Boolean,default:!1},labelComponent:{type:String,default:"label"},labelAttrs:Object},setup(e){const t=ae("form-item"),{field:r}=he(e),a=pe(ve,{}),{autoLabelWidth:i,layout:l}=he(a),o=p(()=>{var s;const c=qe({},(s=e.labelColProps)!=null?s:a.labelColProps);return e.labelColFlex?c.flex=e.labelColFlex:a.autoLabelWidth&&(c.flex=`${a.maxLabelWidth}px`),c}),u=p(()=>{var s;const c=qe({},(s=e.wrapperColProps)!=null?s:a.wrapperColProps);return(e.labelColFlex||a.autoLabelWidth)&&(c.flex="auto"),c}),j=p(()=>{var s;return(s=e.labelColStyle)!=null?s:a.labelColStyle}),v=p(()=>{var s;return(s=e.wrapperColStyle)!=null?s:a.wrapperColStyle}),E=we(a.model,e.field),W=I({}),m=I({}),S=p(()=>Lt(W)),K=p(()=>Et(m)),g=Pe(!1),f=p(()=>we(a.model,e.field)),h=p(()=>{var s;return Boolean((s=e.disabled)!=null?s:a==null?void 0:a.disabled)}),T=p(()=>{var s;return(s=e.validateStatus)!=null?s:S.value}),k=p(()=>S.value==="error"),J=p(()=>{var s,c,$;const U=[].concat(($=(c=e.rules)!=null?c:(s=a==null?void 0:a.rules)==null?void 0:s[e.field])!=null?$:[]),F=U.some(w=>w.required);return e.required&&!F?[{required:!0}].concat(U):U}),oe=p(()=>J.value.some(s=>s.required)),Y=e.noStyle?pe(Se,void 0):void 0,P=(s,{status:c,message:$})=>{W[s]=c,m[s]=$,e.noStyle&&(Y==null||Y.updateValidateState(s,{status:c,message:$}))},ne=p(()=>e.feedback&&T.value?T.value:void 0),A=()=>{if(g.value)return Promise.resolve();const s=J.value;if(!r.value||s.length===0)return S.value&&B(),Promise.resolve();const c=r.value,$=f.value;P(c,{status:"",message:""});const U=new xe({[c]:s.map(F=>(!F.type&&!F.validator&&(F.type="string"),F))},{ignoreEmptyString:!0});return new Promise(F=>{U.validate({[c]:$},w=>{var ye;const je=Boolean(w==null?void 0:w[c]);P(c,{status:je?"error":"",message:(ye=w==null?void 0:w[c].message)!=null?ye:""});const Te=je?{label:e.label,field:r.value,value:w[c].value,type:w[c].type,isRequiredError:Boolean(w[c].requiredError),message:w[c].message}:void 0;F(Te)})})},ue=p(()=>[].concat(e.validateTrigger)),Q=p(()=>ue.value.reduce((s,c)=>{switch(c){case"change":return s.onChange=()=>{A()},s;case"input":return s.onInput=()=>{ce(()=>{A()})},s;case"focus":return s.onFocus=()=>{A()},s;case"blur":return s.onBlur=()=>{A()},s;default:return s}},{}));Me(Se,I({eventHandlers:Q,size:a&&Ze(a,"size"),disabled:h,error:k,feedback:ne,updateValidateState:P}));const B=()=>{r.value&&P(r.value,{status:"",message:""})},d=I({field:r,disabled:h,error:k,validate:A,clearValidate:B,resetField:()=>{B(),g.value=!0,(a==null?void 0:a.model)&&r.value&&Le(a.model,r.value,E),ce(()=>{g.value=!1})},setField:s=>{var c,$;r.value&&(g.value=!0,"value"in s&&(a==null?void 0:a.model)&&r.value&&Le(a.model,r.value,s.value),(s.status||s.message)&&P(r.value,{status:(c=s.status)!=null?c:"",message:($=s.message)!=null?$:""}),ce(()=>{g.value=!1}))}});Ae(()=>{var s;d.field&&((s=a.addField)==null||s.call(a,d))}),Re(()=>{var s;d.field&&((s=a.removeField)==null||s.call(a,d))});const b=p(()=>[t,`${t}-layout-${a.layout}`,{[`${t}-error`]:k.value,[`${t}-status-${T.value}`]:Boolean(T.value)},e.rowClass]),y=p(()=>[`${t}-label-col`,{[`${t}-label-col-left`]:a.labelAlign==="left",[`${t}-label-col-flex`]:a.autoLabelWidth||e.labelColFlex}]),C=p(()=>[`${t}-wrapper-col`,{[`${t}-wrapper-col-flex`]:!u.value}]);return{prefixCls:t,cls:b,isRequired:oe,isError:k,finalMessage:K,mergedLabelCol:o,mergedWrapperCol:u,labelColCls:y,autoLabelWidth:i,layout:l,mergedLabelStyle:j,wrapperColCls:C,mergedWrapperStyle:v}}});function Pt(e,t,r,a,i,l){var o;const u=G("FormItemLabel"),j=G("ArcoCol"),v=G("FormItemMessage"),E=G("ArcoRow");return e.noStyle?q(e.$slots,"default",{key:0}):(O(),x(E,X({key:1,class:[e.cls,{[`${e.prefixCls}-has-help`]:Boolean((o=e.$slots.help)!=null?o:e.help)}],wrap:!(e.labelColFlex||e.autoLabelWidth),div:e.layout!=="horizontal"||e.hideLabel},e.rowProps),{default:L(()=>[e.hideLabel?Z("v-if",!0):(O(),x(j,X({key:0,class:e.labelColCls,style:e.mergedLabelStyle},e.mergedLabelCol),{default:L(()=>[$e(u,{required:e.hideAsterisk?!1:e.isRequired,"show-colon":e.showColon,component:e.labelComponent,attrs:e.labelAttrs},{default:L(()=>[e.$slots.label||e.label?q(e.$slots,"label",{key:0},()=>[ee(H(e.label),1)]):Z("v-if",!0)]),_:3},8,["required","show-colon","component","attrs"])]),_:3},16,["class","style"])),$e(j,X({class:e.wrapperColCls,style:e.mergedWrapperStyle},e.mergedWrapperCol),{default:L(()=>[N("div",{class:z(`${e.prefixCls}-content-wrapper`)},[N("div",{class:z([`${e.prefixCls}-content`,{[`${e.prefixCls}-content-flex`]:e.contentFlex},e.contentClass])},[q(e.$slots,"default")],2)],2),e.isError||e.$slots.help||e.help?(O(),x(v,{key:0,error:e.finalMessage,help:e.help},He({_:2},[e.$slots.help?{name:"help",fn:L(()=>[q(e.$slots,"help")])}:void 0]),1032,["error","help"])):Z("v-if",!0),e.$slots.extra||e.extra?(O(),ie("div",{key:1,class:z(`${e.prefixCls}-extra`)},[q(e.$slots,"extra",{},()=>[ee(H(e.extra),1)])],2)):Z("v-if",!0)]),_:3},16,["class","style"])]),_:3},16,["class","wrap","div"]))}var fe=re(Mt,[["render",Pt]]);const xt=Object.assign(de,{Item:fe,install:(e,t)=>{Je(e,t);const r=Ye(t);e.component(r+de.name,de),e.component(r+fe.name,fe)}});export{xt as F,fe as a};
