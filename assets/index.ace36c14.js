import{Q as Ee,a7 as je,R as wl,D as g,r as E,S as J,d as X,m as En,o as Fe,e as ke,$ as Te,al as el,n as Tn,ad as tl,h as d,l as he,C as ae,z as pl,aX as Bn,W as le,ah as ll,aN as tt,N as _t,au as jn,a6 as ve,az as Kn,X as Dn,gY as Ln,aR as zn,gZ as Mn,g_ as Nn,B as nl,V as H,I as Wn,aY as $l,bj as Il,aI as Vn,b as fe,aq as ct,ar as ft,a8 as Ol,bm as qn,F as Hn,a9 as se,aa as Rl,aL as vt,T as Gn,aM as Un,an as Yn,ai as Xn,y as Qn,a4 as Zn,a5 as Jn}from"./index.eea0dd1e.js";import{S as ea}from"./index.40817fc7.js";import{T as ta,f as Ct,b as Pl,a as Ye,P as la,R as al,V as na}from"./index.267f8e3b.js";import{C as Be}from"./index.df8d2805.js";import{R as xt}from"./index.b7f878bf.js";import{g as aa}from"./get-value-by-path.6581d1e7.js";var Ke=function(e){return function(t){return Math.pow(t,e)}},De=function(e){return function(t){return 1-Math.abs(Math.pow(t-1,e))}},lt=function(e){return function(t){return t<.5?Ke(e)(t*2)/2:De(e)(t*2-1)/2+.5}},ra=function(e){return e},oa=Ke(2),ua=De(2),ia=lt(2),da=Ke(3),sa=De(3),ca=lt(3),fa=Ke(4),va=De(4),ha=lt(4),ma=Ke(5),ya=De(5),ga=lt(5),ba=function(e){return 1+Math.sin(Math.PI/2*e-Math.PI/2)},xa=function(e){return Math.sin(Math.PI/2*e)},_a=function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2},St=function(e){var t=7.5625,l=2.75;return e<1/l?t*e*e:e<2/l?(e-=1.5/l,t*e*e+.75):e<2.5/l?(e-=2.25/l,t*e*e+.9375):(e-=2.625/l,t*e*e+.984375)},Fl=function(e){return 1-St(1-e)},Ca=function(e){return e<.5?Fl(e*2)*.5:St(e*2-1)*.5+.5},Sa=Object.freeze({linear:ra,quadIn:oa,quadOut:ua,quadInOut:ia,cubicIn:da,cubicOut:sa,cubicInOut:ca,quartIn:fa,quartOut:va,quartInOut:ha,quintIn:ma,quintOut:ya,quintInOut:ga,sineIn:ba,sineOut:xa,sineInOut:_a,bounceOut:St,bounceIn:Fl,bounceInOut:Ca}),wt=function(t){var l=t.from,a=t.to,m=t.duration,o=t.delay,s=t.easing,c=t.onStart,f=t.onUpdate,y=t.onFinish;for(var u in l)a[u]===void 0&&(a[u]=l[u]);for(var _ in a)l[_]===void 0&&(l[_]=a[_]);this.from=l,this.to=a,this.duration=m||500,this.delay=o||0,this.easing=s||"linear",this.onStart=c,this.onUpdate=f||function(){},this.onFinish=y,this.startTime=Date.now()+this.delay,this.started=!1,this.finished=!1,this.timer=null,this.keys={}};wt.prototype.update=function(){if(this.time=Date.now(),!(this.time<this.startTime)&&!this.finished){if(this.elapsed===this.duration){this.finished||(this.finished=!0,this.onFinish&&this.onFinish(this.keys));return}this.elapsed=this.time-this.startTime,this.elapsed=this.elapsed>this.duration?this.duration:this.elapsed;for(var t in this.to)this.keys[t]=this.from[t]+(this.to[t]-this.from[t])*Sa[this.easing](this.elapsed/this.duration);this.started||(this.onStart&&this.onStart(this.keys),this.started=!0),this.onUpdate(this.keys)}};wt.prototype.start=function(){var t=this;this.startTime=Date.now()+this.delay;var l=function(){t.update(),t.timer=requestAnimationFrame(l),t.finished&&(cancelAnimationFrame(t.timer),t.timer=null)};l()};wt.prototype.stop=function(){cancelAnimationFrame(this.timer),this.timer=null};var wa=Object.defineProperty,pa=Object.defineProperties,$a=Object.getOwnPropertyDescriptors,rl=Object.getOwnPropertySymbols,Ia=Object.prototype.hasOwnProperty,Oa=Object.prototype.propertyIsEnumerable,ol=(e,t,l)=>t in e?wa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,Ra=(e,t)=>{for(var l in t||(t={}))Ia.call(t,l)&&ol(e,l,t[l]);if(rl)for(var l of rl(t))Oa.call(t,l)&&ol(e,l,t[l]);return e},Pa=(e,t)=>pa(e,$a(t));const Fa=e=>{let t=0;const l=a=>{if(je(a)&&a.length>0)for(const m of a)m.children?l(m.children):t+=1};return l(e),t},kl=e=>{let t=0;if(je(e)&&e.length>0){t=1;for(const l of e)if(l.children){const a=kl(l.children);a>0&&(t=Math.max(t,a+1))}}return t},ul=(e,t)=>{let{parent:l}=e;for(;l;)l.fixed===t&&(t==="left"?l.isLastLeftFixed=!0:l.isFirstRightFixed=!0),l=l.parent},ka=(e,t)=>{const l=kl(e);t.clear();const a=[],m=[...Array(l)].map(()=>[]);let o,s;const c=(f,{level:y=0,parent:u,fixed:_}={})=>{var S;for(const x of f){const w=Pa(Ra({},x),{parent:u});if(je(w.children)){const T=Fa(w.children);T>1&&(w.colSpan=T),m[y].push(w),c(w.children,{level:y+1,parent:w,fixed:w.fixed})}else{const T=l-y;T>1&&(w.rowSpan=T),(_||w.fixed)&&(w.fixed=(S=w.fixed)!=null?S:_,w.fixed==="left"?o=a.length:Ee(s)&&(s=a.length)),(Ee(w.dataIndex)||wl(w.dataIndex))&&(w.dataIndex=`__arco_data_index_${a.length}`),t.set(w.dataIndex,w),a.push(w),m[y].push(w)}}};return c(e),Ee(o)||(a[o].isLastLeftFixed=!0,ul(a[o],"left")),Ee(s)||(a[s].isFirstRightFixed=!0,ul(a[s],"right")),{dataColumns:a,groupColumns:m}},Aa=(e,t)=>{for(let l=0;l<e.length;l++)if(e[l].name===t)return l;return-1},Ea=(e,t)=>{var l;const a=Aa(t,e.name);if(a<=0)return 0;let m=0;const o=t.slice(0,a);for(const s of o)m+=(l=s.width)!=null?l:0;return m},pt=e=>e.children&&e.children.length>0?pt(e.children[0]):e,Ta=e=>e.children&&e.children.length>0?pt(e.children[e.children.length-1]):e,Ba=(e,{dataColumns:t,operations:l})=>{var a,m;let o=0;if(e.fixed==="left"){for(const f of l)o+=(a=f.width)!=null?a:40;const c=pt(e);for(const f of t){if(c.dataIndex===f.dataIndex)break;o+=(m=f.width)!=null?m:0}return o}const s=Ta(e);for(let c=t.length-1;c>0;c--){const f=t[c];if(s.dataIndex===f.dataIndex)break;f.fixed==="right"&&(o+=f.width)}return o},Al=(e,t)=>t.fixed?[`${e}-col-fixed-left`,{[`${e}-col-fixed-left-last`]:t.isLastLeftFixed}]:[],El=(e,t)=>t.fixed==="left"?[`${e}-col-fixed-left`,{[`${e}-col-fixed-left-last`]:t.isLastLeftFixed}]:t.fixed==="right"?[`${e}-col-fixed-right`,{[`${e}-col-fixed-right-first`]:t.isFirstRightFixed}]:[],Tl=(e,{dataColumns:t,operations:l})=>{if(e.fixed){const a=`${Ba(e,{dataColumns:t,operations:l})}px`;return e.fixed==="left"?{left:a}:{right:a}}return{}},Bl=(e,t)=>e.fixed?{left:`${Ea(e,t)}px`}:{},il=(e,t,l)=>{var a;let m=e;for(let o=0;o<t.length;o++){const s=t[o];if(o>=t.length-1)if(l)m.splice(s,0,l);else return m.splice(s,1)[0];m=(a=m[s].children)!=null?a:[]}},$t=e=>{const t=[];if(e.children)for(const l of e.children)l.isLeaf?t.push(l.key):t.push(...$t(l));return t},ja=(e,t)=>{let l=!1,a=!1;const m=t.filter(o=>e.includes(o));return m.length>0&&(m.length>=t.length?l=!0:a=!0),{checked:l,indeterminate:a}},Ae=(e,t,l=!1)=>l?e.filter(a=>!t.includes(a)):Array.from(new Set(e.concat(t))),Ka=({selectedKeys:e,defaultSelectedKeys:t,rowSelection:l,currentAllRowKeys:a,currentAllEnabledRowKeys:m,emit:o})=>{var s,c,f;const y=g(()=>{var $;return(($=l.value)==null?void 0:$.type)==="radio"}),u=E((f=(c=t.value)!=null?c:(s=l.value)==null?void 0:s.defaultSelectedRowKeys)!=null?f:[]),_=g(()=>{var $,I,P;return(P=(I=e.value)!=null?I:($=l.value)==null?void 0:$.selectedRowKeys)!=null?P:u.value}),S=g(()=>_.value.filter($=>a.value.includes($)));return{isRadio:y,selectedRowKeys:_,currentSelectedRowKeys:S,handleSelectAll:$=>{const I=Ae(_.value,m.value,!$);u.value=I,o("selectAll",$),o("selectionChange",I),o("update:selectedKeys",I)},handleSelect:($,I)=>{const P=y.value?[I.key]:Ae(_.value,[I.key],!$);u.value=P,o("select",P,I.key,I.raw),o("selectionChange",P),o("update:selectedKeys",P)},handleSelectAllLeafs:($,I)=>{const P=Ae(_.value,$t($),!I);u.value=P,o("select",P,$.key,$.raw),o("selectionChange",P),o("update:selectedKeys",P)},select:($,I=!0)=>{const P=[].concat($),j=y.value?P:Ae(_.value,P,!I);u.value=j,o("selectionChange",j),o("update:selectedKeys",j)},selectAll:($=!0)=>{const I=Ae(_.value,m.value,!$);u.value=I,o("selectionChange",I),o("update:selectedKeys",I)},clearSelected:()=>{u.value=[],o("selectionChange",[]),o("update:selectedKeys",[])}}},Da=({expandedKeys:e,defaultExpandedKeys:t,defaultExpandAllRows:l,expandable:a,allRowKeys:m,emit:o})=>{const c=E((()=>{var S,x;return t.value?t.value:(S=a.value)!=null&&S.defaultExpandedRowKeys?a.value.defaultExpandedRowKeys:l.value||((x=a.value)==null?void 0:x.defaultExpandAllRows)?[...m.value]:[]})()),f=g(()=>{var S,x,w;return(w=(x=e.value)!=null?x:(S=a.value)==null?void 0:S.expandedRowKeys)!=null?w:c.value});return{expandedRowKeys:f,handleExpand:(S,x)=>{const T=f.value.includes(S)?f.value.filter(p=>S!==p):f.value.concat(S);c.value=T,o("expand",S,x),o("expandedChange",T),o("update:expandedKeys",T)},expand:(S,x=!0)=>{const w=[].concat(S),T=x?f.value.concat(w):f.value.filter(p=>!w.includes(p));c.value=T,o("expandedChange",T),o("update:expandedKeys",T)},expandAll:(S=!0)=>{const x=S?[...m.value]:[];c.value=x,o("expandedChange",x),o("update:expandedKeys",x)}}},La=(e,t)=>{var l,a;const m=E(J(e.pagination)&&(l=e.pagination.defaultCurrent)!=null?l:1),o=E(J(e.pagination)&&(a=e.pagination.defaultPageSize)!=null?a:10),s=g(()=>{var u;return J(e.pagination)&&(u=e.pagination.pageSize)!=null?u:o.value});return{page:g(()=>{var u;return J(e.pagination)&&(u=e.pagination.current)!=null?u:m.value}),pageSize:s,handlePageChange:u=>{m.value=u,t("pageChange",u)},handlePageSizeChange:u=>{o.value=u,t("pageSizeChange",u)}}},za=X({name:"ColGroup",props:{dataColumns:{type:Array,required:!0},operations:{type:Array,required:!0},columnWidth:{type:Object}},setup(){return{fixedWidth:t=>{if(t)return{width:`${t}px`,minWidth:`${t}px`,maxWidth:`${t}px`}}}}});function Ma(e,t,l,a,m,o){return Fe(),ke("colgroup",null,[(Fe(!0),ke(Te,null,el(e.operations,s=>(Fe(),ke("col",{key:`arco-col-${s.name}`,class:Tn(`arco-table-${s.name}-col`),style:tl(e.fixedWidth(s.width))},null,6))),128)),(Fe(!0),ke(Te,null,el(e.dataColumns,s=>(Fe(),ke("col",{key:`arco-col-${s.dataIndex}`,style:tl(e.fixedWidth(e.columnWidth&&s.dataIndex&&e.columnWidth[s.dataIndex]||s.width))},null,4))),128))])}var Xe=En(za,[["render",Ma]]),Ze=X({name:"Thead",setup(e,{slots:t}){return()=>{var l,a,m;return d((a=(l=t.thead)==null?void 0:l.call(t)[0])!=null?a:"thead",null,(m=t.default)==null?void 0:m.call(t))}}}),Je=X({name:"Tbody",setup(e,{slots:t}){return()=>{var l,a,m;return d((a=(l=t.tbody)==null?void 0:l.call(t)[0])!=null?a:"tbody",null,(m=t.default)==null?void 0:m.call(t))}}}),ne=X({name:"Tr",props:{expand:{type:Boolean},empty:{type:Boolean},checked:{type:Boolean},rowIndex:Number,record:{type:Object,default:()=>({})}},setup(e,{slots:t}){const l=he("table"),a=g(()=>[`${l}-tr`,{[`${l}-tr-expand`]:e.expand,[`${l}-tr-empty`]:e.empty,[`${l}-tr-checked`]:e.checked}]);return()=>{var m,o,s,c;return d((s=(o=t.tr)==null?void 0:o.call(t,{rowIndex:e.rowIndex,record:(m=e.record)==null?void 0:m.raw})[0])!=null?s:"tr",{class:a.value},(c=t.default)==null?void 0:c.call(t))}}});const Na=({column:e,tableCtx:t})=>{const l=g(()=>{var y;if(e.value.dataIndex&&e.value.dataIndex===((y=t.sorter)==null?void 0:y.field))return t.sorter.direction}),a=g(()=>{var y,u,_;return(_=(u=(y=e.value)==null?void 0:y.sortable)==null?void 0:u.sortDirections)!=null?_:[]}),m=g(()=>a.value.length>0),o=g(()=>a.value.includes("ascend")),s=g(()=>a.value.includes("descend")),c=g(()=>{var y,u;return l.value?l.value===a.value[0]&&(u=a.value[1])!=null?u:"":(y=a.value[0])!=null?y:""});return{sortOrder:l,hasSorter:m,hasAscendBtn:o,hasDescendBtn:s,nextSortOrder:c,handleClickSorter:y=>{var u;e.value.dataIndex&&((u=t.onSorterChange)==null||u.call(t,e.value.dataIndex,c.value,y))}}},Wa=({column:e,tableCtx:t})=>{const l=g(()=>{var x;return e.value.dataIndex&&((x=t.filters)==null?void 0:x[e.value.dataIndex])?t.filters[e.value.dataIndex]:[]}),a=E(!1),m=g(()=>l.value.length>0),o=g(()=>{var x;return Boolean((x=e.value.filterable)==null?void 0:x.multiple)}),s=E(l.value);ae(l,x=>{je(x)&&String(x)!==String(s.value)&&(s.value=x)});const c=x=>{a.value=x},f=x=>{s.value=x};return{filterPopupVisible:a,isFilterActive:m,isMultipleFilter:o,columnFilterValue:s,handleFilterPopupVisibleChange:c,setFilterValue:f,handleCheckboxFilterChange:x=>{f(x)},handleRadioFilterChange:x=>{f([x])},handleFilterConfirm:x=>{var w;e.value.dataIndex&&((w=t.onFilterChange)==null||w.call(t,e.value.dataIndex,s.value,x)),c(!1)},handleFilterReset:x=>{var w;f([]),e.value.dataIndex&&((w=t.onFilterChange)==null||w.call(t,e.value.dataIndex,s.value,x)),c(!1)}}},xe=Symbol("ArcoTable"),dl=Symbol("ArcoTableColumn");function sl(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!tt(e)}var jl=X({name:"AutoTooltip",inheritAttrs:!1,props:{tooltipProps:{type:Object}},setup(e,{attrs:t,slots:l}){const a=he("auto-tooltip"),m=E(),o=E(),s=E(""),c=E(!1),f=()=>{if(m.value&&o.value){const S=o.value.offsetWidth>m.value.offsetWidth;S!==c.value&&(c.value=S)}},y=()=>{var S;((S=o.value)==null?void 0:S.textContent)&&o.value.textContent!==s.value&&(s.value=o.value.textContent)},u=()=>{y(),f()};pl(()=>{y(),f()}),Bn(()=>{y(),f()});const _=()=>d("span",le({ref:m,class:a},t),[d(ll,{onResize:u},{default:()=>{var S;return[d("span",{ref:o,class:`${a}-content`},[(S=l.default)==null?void 0:S.call(l)])]}})]);return()=>{let S;if(c.value){let x;return d(ta,le({content:s.value,onResize:u},e.tooltipProps),sl(x=_())?x:{default:()=>[x]})}return d(ll,{onResize:u},sl(S=_())?S:{default:()=>[S]})}}}),Va=Object.defineProperty,cl=Object.getOwnPropertySymbols,qa=Object.prototype.hasOwnProperty,Ha=Object.prototype.propertyIsEnumerable,fl=(e,t,l)=>t in e?Va(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,ht=(e,t)=>{for(var l in t||(t={}))qa.call(t,l)&&fl(e,l,t[l]);if(cl)for(var l of cl(t))Ha.call(t,l)&&fl(e,l,t[l]);return e};function mt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!tt(e)}var et=X({name:"Th",props:{column:{type:Object,default:()=>({})},operations:{type:Array,default:()=>[]},dataColumns:{type:Array,default:()=>[]},resizable:Boolean},setup(e,{slots:t}){const{column:l}=_t(e),a=he("table"),{t:m}=jn(),o=ve(xe,{}),s=g(()=>{var R;return((R=e.column)==null?void 0:R.dataIndex)&&o.resizingColumn===e.column.dataIndex}),c=g(()=>{var R;if(J((R=e.column)==null?void 0:R.tooltip))return e.column.tooltip}),f=g(()=>{var R;return((R=e.column)==null?void 0:R.filterable)&&Kn(e.column.filterable.alignLeft)?e.column.filterable.alignLeft:o.filterIconAlignLeft}),{sortOrder:y,hasSorter:u,hasAscendBtn:_,hasDescendBtn:S,nextSortOrder:x,handleClickSorter:w}=Na({column:l,tableCtx:o}),{filterPopupVisible:T,isFilterActive:p,isMultipleFilter:v,columnFilterValue:O,handleFilterPopupVisibleChange:$,setFilterValue:I,handleCheckboxFilterChange:P,handleRadioFilterChange:j,handleFilterConfirm:W,handleFilterReset:D}=Wa({column:l,tableCtx:o}),_e=()=>{var R,F,A,K,q;let k,re;const{filterable:G}=e.column;return(R=e.column.slots)!=null&&R["filter-content"]?(F=e.column.slots)==null?void 0:F["filter-content"]({filterValue:O.value,setFilterValue:I,handleFilterConfirm:W,handleFilterReset:D}):G!=null&&G.slotName?(K=(A=o==null?void 0:o.slots)==null?void 0:A[G==null?void 0:G.slotName])==null?void 0:K.call(A,{filterValue:O.value,setFilterValue:I,handleFilterConfirm:W,handleFilterReset:D}):G!=null&&G.renderContent?G.renderContent({filterValue:O.value,setFilterValue:I,handleFilterConfirm:W,handleFilterReset:D}):d("div",{class:`${a}-filters-content`},[d("ul",{class:`${a}-filters-list`},[(q=G==null?void 0:G.filters)==null?void 0:q.map((Q,oe)=>{var ze;return d("li",{class:`${a}-filters-item`,key:oe},[v.value?d(Be,{value:Q.value,modelValue:O.value,uninjectGroupContext:!0,onChange:P},{default:()=>[Q.text]}):d(xt,{value:Q.value,modelValue:(ze=O.value[0])!=null?ze:"",uninjectGroupContext:!0,onChange:j},{default:()=>[Q.text]})])})]),d("div",{class:`${a}-filters-bottom`},[d(nl,{size:"mini",onClick:D},mt(k=m("table.resetText"))?k:{default:()=>[k]}),d(nl,{type:"primary",size:"mini",onClick:W},mt(re=m("table.okText"))?re:{default:()=>[re]})])])},ee=()=>{const{filterable:R}=e.column;return R?d(zn,le({popupVisible:T.value,trigger:"click",autoFitPosition:!0,popupOffset:f.value?4:0,onPopupVisibleChange:$},R.triggerProps),{default:()=>[d(Dn,{class:[`${a}-filters`,{[`${a}-filters-active`]:p.value,[`${a}-filters-open`]:T.value,[`${a}-filters-align-left`]:f.value}],disabled:!f.value,onClick:F=>F.stopPropagation()},{default:()=>{var F,A,K,q,k;return[(k=(q=(A=(F=e.column.slots)==null?void 0:F["filter-icon"])==null?void 0:A.call(F))!=null?q:(K=R.icon)==null?void 0:K.call(R))!=null?k:d(Ln,null,null)]}})],content:_e}):null},Le=g(()=>{var R,F;const A=[`${a}-cell`,`${a}-cell-align-${(F=(R=e.column)==null?void 0:R.align)!=null?F:e.column.children?"center":"left"}`];return u.value&&A.push(`${a}-cell-with-sorter`,{[`${a}-cell-next-ascend`]:x.value==="ascend",[`${a}-cell-next-descend`]:x.value==="descend"}),f.value&&A.push(`${a}-cell-with-filter`),A}),Z=()=>{var R,F,A,K,q,k;return t.default?t.default():((R=e.column)==null?void 0:R.titleSlotName)&&((F=o.slots)==null?void 0:F[e.column.titleSlotName])?(K=(A=o.slots)[e.column.titleSlotName])==null?void 0:K.call(A,{column:e.column}):(k=(q=e.column)==null?void 0:q.slots)!=null&&k.title?e.column.slots.title():H(e.column.title)?e.column.title():e.column.title},me=()=>{var R,F,A;let K;return d("span",{class:Le.value,onClick:u.value?w:void 0},[((R=e.column)==null?void 0:R.ellipsis)&&((F=e.column)==null?void 0:F.tooltip)?d(jl,{class:`${a}-th-title`,tooltipProps:c.value},mt(K=Z())?K:{default:()=>[K]}):d("span",{class:[`${a}-th-title`,{[`${a}-text-ellipsis`]:(A=e.column)==null?void 0:A.ellipsis}]},[Z()]),u.value&&d("span",{class:`${a}-sorter`},[_.value&&d("div",{class:[`${a}-sorter-icon`,{[`${a}-sorter-icon-active`]:y.value==="ascend"}]},[d(Mn,null,null)]),S.value&&d("div",{class:[`${a}-sorter-icon`,{[`${a}-sorter-icon-active`]:y.value==="descend"}]},[d(Nn,null,null)])]),f.value&&ee()])},ye=g(()=>{var R,F;return ht(ht(ht({},Tl(e.column,{dataColumns:e.dataColumns,operations:e.operations})),(R=e.column)==null?void 0:R.cellStyle),(F=e.column)==null?void 0:F.headerCellStyle)}),V=g(()=>{var R,F;return[`${a}-th`,{[`${a}-col-sorted`]:Boolean(y.value),[`${a}-th-resizing`]:s.value},...El(a,e.column),(R=e.column)==null?void 0:R.cellClass,(F=e.column)==null?void 0:F.headerCellClass]}),te=R=>{var F,A,K;(F=e.column)!=null&&F.dataIndex&&((K=o.onThMouseDown)==null||K.call(o,(A=e.column)==null?void 0:A.dataIndex,R))};return()=>{var R,F,A,K;const q=(R=e.column.colSpan)!=null?R:1,k=(F=e.column.rowSpan)!=null?F:1;return d((K=(A=t.th)==null?void 0:A.call(t,{column:e.column})[0])!=null?K:"th",{class:V.value,style:ye.value,colspan:q>1?q:void 0,rowspan:k>1?k:void 0},[me(),!f.value&&ee(),e.resizable&&d("span",{class:`${a}-column-handle`,onMousedown:te},null)])}}}),Ga=Object.defineProperty,vl=Object.getOwnPropertySymbols,Ua=Object.prototype.hasOwnProperty,Ya=Object.prototype.propertyIsEnumerable,hl=(e,t,l)=>t in e?Ga(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,yt=(e,t)=>{for(var l in t||(t={}))Ua.call(t,l)&&hl(e,l,t[l]);if(vl)for(var l of vl(t))Ya.call(t,l)&&hl(e,l,t[l]);return e};function Xa(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!tt(e)}var ce=X({name:"Td",props:{rowIndex:Number,record:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})},type:{type:String,default:"normal"},operations:{type:Array,default:()=>[]},dataColumns:{type:Array,default:()=>[]},colSpan:{type:Number,default:1},rowSpan:{type:Number,default:1},isFixedExpand:{type:Boolean,default:!1},containerWidth:{type:Number},showExpandBtn:{type:Boolean,default:!1},indentSize:{type:Number,default:0},renderExpandBtn:{type:Function},summary:{type:Boolean,default:!1}},setup(e,{slots:t}){const l=he("table"),a=g(()=>{var p;if(J((p=e.column)==null?void 0:p.tooltip))return e.column.tooltip}),m=g(()=>{var p,v;return((p=e.column)==null?void 0:p.dataIndex)&&((v=_.sorter)==null?void 0:v.field)===e.column.dataIndex}),o=g(()=>{var p;return((p=e.column)==null?void 0:p.dataIndex)&&_.resizingColumn===e.column.dataIndex}),s=()=>{var p,v,O,$,I,P;return e.summary?H((p=e.column)==null?void 0:p.summaryCellClass)?e.column.summaryCellClass((v=e.record)==null?void 0:v.raw):(O=e.column)==null?void 0:O.summaryCellClass:H(($=e.column)==null?void 0:$.bodyCellClass)?e.column.bodyCellClass((I=e.record)==null?void 0:I.raw):(P=e.column)==null?void 0:P.bodyCellClass},c=g(()=>{var p;return[`${l}-td`,{[`${l}-col-sorted`]:m.value,[`${l}-td-resizing`]:o.value},...El(l,e.column),(p=e.column)==null?void 0:p.cellClass,s()]}),f=()=>{var p,v,O,$,I,P;return e.summary?H((p=e.column)==null?void 0:p.summaryCellStyle)?e.column.summaryCellStyle((v=e.record)==null?void 0:v.raw):(O=e.column)==null?void 0:O.summaryCellStyle:H(($=e.column)==null?void 0:$.bodyCellStyle)?e.column.bodyCellStyle((I=e.record)==null?void 0:I.raw):(P=e.column)==null?void 0:P.bodyCellStyle},y=g(()=>{var p;const v=Tl(e.column,{dataColumns:e.dataColumns,operations:e.operations}),O=f();return yt(yt(yt({},v),(p=e.column)==null?void 0:p.cellStyle),O)}),u=g(()=>{if(e.isFixedExpand&&e.containerWidth)return{width:`${e.containerWidth}px`}}),_=ve(xe,{}),S=()=>{var p,v,O,$,I,P,j,W;if(t.default)return t.default();const D={record:(p=e.record)==null?void 0:p.raw,column:e.column,rowIndex:(v=e.rowIndex)!=null?v:-1};return t.cell?t.cell(D):(O=e.column.slots)!=null&&O.cell?e.column.slots.cell(D):e.column.render?e.column.render(D):e.column.slotName&&(($=_.slots)==null?void 0:$[e.column.slotName])?(P=(I=_.slots)[e.column.slotName])==null?void 0:P.call(I,D):String((W=aa((j=e.record)==null?void 0:j.raw,e.column.dataIndex))!=null?W:"")},x=E(!1),w=p=>{var v,O;H(_.loadMore)&&!((v=e.record)!=null&&v.isLeaf)&&!((O=e.record)!=null&&O.children)&&(x.value=!0,new Promise($=>{var I;(I=_.loadMore)==null||I.call(_,e.record.raw,$)}).then($=>{var I;(I=_.addLazyLoadData)==null||I.call(_,$,e.record),x.value=!1})),p.stopPropagation()},T=()=>{var p,v,O,$,I,P;let j;return d("span",{class:[`${l}-cell`,`${l}-cell-align-${(v=(p=e.column)==null?void 0:p.align)!=null?v:"left"}`,{[`${l}-cell-fixed-expand`]:e.isFixedExpand,[`${l}-cell-expand-icon`]:e.showExpandBtn}],style:u.value},[e.indentSize>0&&d("span",{style:{paddingLeft:`${e.indentSize}px`}},null),e.showExpandBtn&&d("span",{class:`${l}-cell-inline-icon`,onClick:w},[x.value?d(Wn,null,null):(O=e.renderExpandBtn)==null?void 0:O.call(e,e.record,!1)]),(($=e.column)==null?void 0:$.ellipsis)&&((I=e.column)==null?void 0:I.tooltip)?d(jl,{class:`${l}-td-content`,tooltipProps:a.value},Xa(j=S())?j:{default:()=>[j]}):d("span",{class:[`${l}-td-content`,{[`${l}-text-ellipsis`]:(P=e.column)==null?void 0:P.ellipsis}]},[S()])])};return()=>{var p,v,O,$;return d(($=(O=t.td)==null?void 0:O.call(t,{record:(p=e.record)==null?void 0:p.raw,column:e.column,rowIndex:(v=e.rowIndex)!=null?v:-1})[0])!=null?$:"td",{class:c.value,style:y.value,rowspan:e.rowSpan>1?e.rowSpan:void 0,colspan:e.colSpan>1?e.colSpan:void 0},[T()])}}}),Qa=X({name:"OperationTh",props:{operationColumn:{type:Object,required:!0},operations:{type:Array,required:!0},rowSpan:{type:Number,default:1},selectAll:{type:Boolean,default:!1}},setup(e){const t=he("table"),l=ve(xe,{}),a=g(()=>{var c,f,y,u;let _=!1,S=!1;const x=(f=(c=l.currentSelectedRowKeys)==null?void 0:c.length)!=null?f:0,w=(u=(y=l.currentAllEnabledRowKeys)==null?void 0:y.length)!=null?u:0;return x>0&&(x>=w?_=!0:S=!0),{checked:_,indeterminate:S}}),m=()=>e.selectAll?d(Be,{modelValue:a.value.checked,indeterminate:a.value.indeterminate,uninjectGroupContext:!0,onChange:c=>{var f;(f=l.onSelectAll)==null||f.call(l,c)}},{default:H(e.operationColumn.title)?e.operationColumn.title():e.operationColumn.title}):e.operationColumn.title?H(e.operationColumn.title)?e.operationColumn.title():e.operationColumn.title:null,o=g(()=>Bl(e.operationColumn,e.operations)),s=g(()=>[`${t}-th`,`${t}-operation`,{[`${t}-checkbox`]:e.selectAll},...Al(t,e.operationColumn)]);return()=>d("th",{class:s.value,style:o.value,rowspan:e.rowSpan>1?e.rowSpan:void 0},[d("span",{class:`${t}-cell`},[m()])])}}),ml=X({name:"OperationTd",components:{Checkbox:Be,Radio:xt,IconPlus:$l,IconMinus:Il},props:{operationColumn:{type:Object,required:!0},operations:{type:Array,required:!0},record:{type:Object,required:!0},hasExpand:{type:Boolean,default:!1},selectedRowKeys:{type:Array},renderExpandBtn:{type:Function},colSpan:{type:Number,default:1},rowSpan:{type:Number,default:1},summary:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t,slots:l}){const a=he("table"),m=ve(xe,{}),o=g(()=>Bl(e.operationColumn,e.operations)),s=g(()=>[`${a}-td`,`${a}-operation`,{[`${a}-checkbox`]:e.operationColumn.name==="selection-checkbox",[`${a}-radio`]:e.operationColumn.name==="selection-radio",[`${a}-expand`]:e.operationColumn.name==="expand",[`${a}-drag-handle`]:e.operationColumn.name==="drag-handle"},...Al(a,e.operationColumn)]),c=g(()=>$t(e.record)),f=g(()=>{var u;return ja((u=m.currentSelectedRowKeys)!=null?u:[],c.value)}),y=()=>{var u,_,S,x,w,T;if(e.summary)return null;if(e.operationColumn.render)return e.operationColumn.render(e.record.raw);if(e.operationColumn.name==="selection-checkbox"){const p=e.record.key;return!m.checkStrictly&&!e.record.isLeaf?d(Be,{modelValue:f.value.checked,indeterminate:f.value.indeterminate,disabled:Boolean(e.record.disabled),uninjectGroupContext:!0,onChange:v=>{var O;return(O=m.onSelectAllLeafs)==null?void 0:O.call(m,e.record,v)},onClick:v=>v.stopPropagation()},null):d(Be,{modelValue:(_=(u=e.selectedRowKeys)==null?void 0:u.includes(p))!=null?_:!1,disabled:Boolean(e.record.disabled),uninjectGroupContext:!0,onChange:v=>{var O;return(O=m.onSelect)==null?void 0:O.call(m,v,e.record)},onClick:v=>v.stopPropagation()},null)}if(e.operationColumn.name==="selection-radio"){const p=e.record.key;return d(xt,{modelValue:(x=(S=e.selectedRowKeys)==null?void 0:S.includes(p))!=null?x:!1,disabled:Boolean(e.record.disabled),uninjectGroupContext:!0,onChange:v=>{var O;return(O=m.onSelect)==null?void 0:O.call(m,v,e.record)},onClick:v=>v.stopPropagation()},null)}return e.operationColumn.name==="expand"?e.hasExpand&&e.renderExpandBtn?e.renderExpandBtn(e.record):null:e.operationColumn.name==="drag-handle"?(T=(w=l["drag-handle-icon"])==null?void 0:w.call(l))!=null?T:d(Vn,null,null):null};return()=>d("td",{class:s.value,style:o.value,rowspan:e.rowSpan>1?e.rowSpan:void 0,colspan:e.colSpan>1?e.colSpan:void 0},[d("span",{class:`${a}-cell`},[y()])])}});const Za=e=>{const t=g(()=>{if(e.value)return e.value.type==="handle"?"handle":"row"}),l=fe({dragging:!1,sourceKey:"",sourcePath:[],targetPath:[],data:{}}),a=()=>{l.dragging=!1,l.sourceKey="",l.sourcePath=[],l.targetPath=[],l.data={}};return{dragType:t,dragState:l,handleDragStart:(u,_,S,x)=>{if(u.dataTransfer&&(u.dataTransfer.effectAllowed="move",u.target&&u.target.tagName==="TD")){const{parentElement:w}=u.target;w&&w.tagName==="TR"&&u.dataTransfer.setDragImage(w,0,0)}l.dragging=!0,l.sourceKey=_,l.sourcePath=S,l.data=x},handleDragEnter:(u,_)=>{u.dataTransfer&&(u.dataTransfer.dropEffect="move"),l.targetPath=_,u.preventDefault()},handleDragLeave:u=>{},handleDragover:u=>{u.dataTransfer&&(u.dataTransfer.dropEffect="move"),u.preventDefault()},handleDragEnd:u=>{var _;((_=u.dataTransfer)==null?void 0:_.dropEffect)==="none"&&a()},handleDrop:u=>{a(),u.preventDefault()}}},Ja=(e,t)=>{const l=E(""),a=fe({}),m=(c,f)=>{f.preventDefault(),l.value=c,ct(window,"mousemove",s),ct(window,"mouseup",o),ct(window,"contextmenu",o)},o=()=>{l.value="",ft(window,"mousemove",s),ft(window,"mouseup",o),ft(window,"contextmenu",o)},s=c=>{const f=e.value[l.value];if(f){const{clientX:y}=c,{x:u}=f.getBoundingClientRect();let _=Math.ceil(y-u);_<40&&(_=40),a[l.value]=_,t("columnResize",l.value,_)}};return{resizingColumn:l,columnWidth:a,handleThMouseDown:m,handleThMouseUp:o}},er=({columns:e,onFilterChange:t})=>{const l=E(yl(e.value));ae(e,s=>{const c=yl(s);Ct(c,l.value)||(l.value=c)});const a=g(()=>{var s,c;const f={};for(const y of e.value)if(y.dataIndex){const u=(c=(s=y.filterable)==null?void 0:s.filteredValue)!=null?c:l.value[y.dataIndex];u&&(f[y.dataIndex]=u)}return f});return{_filters:l,computedFilters:a,resetFilters:s=>{var c;const f=s?[].concat(s):[],y={};for(const u of e.value)if(u.dataIndex&&u.filterable&&(f.length===0||f.includes(u.dataIndex))){const _=(c=u.filterable.defaultFilteredValue)!=null?c:[];y[u.dataIndex]=_,t(u.dataIndex,_)}l.value=y},clearFilters:s=>{const c=s?[].concat(s):[],f={};for(const y of e.value)if(y.dataIndex&&y.filterable&&(c.length===0||c.includes(y.dataIndex))){const u=[];f[y.dataIndex]=u,t(y.dataIndex,u)}l.value=f}}},yl=e=>{var t;const l={};for(const a of e)a.dataIndex&&((t=a.filterable)==null?void 0:t.defaultFilteredValue)&&(l[a.dataIndex]=a.filterable.defaultFilteredValue);return l},tr=({columns:e,onSorterChange:t})=>{const l=E(gl(e.value));ae(e,s=>{const c=gl(s);Ct(c,l.value)||(l.value=c)});const a=g(()=>{var s;for(const c of e.value)if(c.dataIndex&&c.sortable){const f=Ol(c.sortable.sortOrder)?c.sortable.sortOrder:((s=l.value)==null?void 0:s.field)===c.dataIndex?l.value.direction:"";if(f)return{field:c.dataIndex,direction:f}}});return{_sorter:l,computedSorter:a,resetSorters:()=>{var s;let c;for(const f of e.value)f.dataIndex&&f.sortable&&(!c&&f.sortable.defaultSortOrder&&(c={field:f.dataIndex,direction:f.sortable.defaultSortOrder}),t(f.dataIndex,(s=f.sortable.defaultSortOrder)!=null?s:""));l.value=c},clearSorters:()=>{for(const s of e.value)s.dataIndex&&s.sortable&&t(s.dataIndex,"")}}},gl=e=>{var t;for(const l of e)if(l.dataIndex&&((t=l.sortable)==null?void 0:t.defaultSortOrder))return{field:l.dataIndex,direction:l.sortable.defaultSortOrder}},bl=({spanMethod:e,data:t,columns:l})=>{const a=g(()=>{const o={};return e.value&&t.value.forEach((s,c)=>{l.value.forEach((f,y)=>{var u,_;const{rowspan:S=1,colspan:x=1}=(_=(u=e.value)==null?void 0:u.call(e,{record:s.raw,column:f,rowIndex:c,columnIndex:y}))!=null?_:{};(S>1||x>1)&&(o[`${c}-${y}`]=[S,x])})}),o}),m=g(()=>{const o=[];for(const s of Object.keys(a.value)){const c=s.split("-").map(y=>Number(y)),f=a.value[s];for(let y=1;y<f[0];y++){o.push(`${c[0]+y}-${c[1]}`);for(let u=1;u<f[1];u++)o.push(`${c[0]+y}-${c[1]+u}`)}for(let y=1;y<f[1];y++)o.push(`${c[0]}-${c[1]+y}`)}return o});return{tableSpan:a,removedCells:m}};var lr=Object.defineProperty,nr=Object.defineProperties,ar=Object.getOwnPropertyDescriptors,xl=Object.getOwnPropertySymbols,rr=Object.prototype.hasOwnProperty,or=Object.prototype.propertyIsEnumerable,_l=(e,t,l)=>t in e?lr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,Qe=(e,t)=>{for(var l in t||(t={}))rr.call(t,l)&&_l(e,l,t[l]);if(xl)for(var l of xl(t))or.call(t,l)&&_l(e,l,t[l]);return e},Cl=(e,t)=>nr(e,ar(t));function ur(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!tt(e)}const Sl={wrapper:!0,cell:!1,headerCell:!1,bodyCell:!1};var gt=X({name:"Table",props:{columns:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]},bordered:{type:[Boolean,Object],default:!0},hoverable:{type:Boolean,default:!0},stripe:{type:Boolean,default:!1},size:{type:String,default:()=>{var e,t;return(t=(e=ve(qn,void 0))==null?void 0:e.size)!=null?t:"large"}},tableLayoutFixed:{type:Boolean,default:!1},loading:{type:[Boolean,Object],default:!1},rowSelection:{type:Object},expandable:{type:Object},scroll:{type:Object},pagination:{type:[Boolean,Object],default:!0},pagePosition:{type:String,default:"br"},indentSize:{type:Number,default:16},rowKey:{type:String,default:"key"},showHeader:{type:Boolean,default:!0},virtualListProps:{type:Object},spanMethod:{type:Function},spanAll:{type:Boolean,default:!1},components:{type:Object},loadMore:{type:Function},filterIconAlignLeft:{type:Boolean,default:!1},hideExpandButtonOnEmpty:{type:Boolean,default:!1},rowClass:{type:[String,Array,Object,Function]},draggable:{type:Object},rowNumber:{type:[Boolean,Object]},columnResizable:{type:Boolean},summary:{type:[Boolean,Function]},summaryText:{type:String,default:"Summary"},summarySpanMethod:{type:Function},selectedKeys:{type:Array},defaultSelectedKeys:{type:Array},expandedKeys:{type:Array},defaultExpandedKeys:{type:Array},defaultExpandAllRows:{type:Boolean,default:!1},stickyHeader:{type:[Boolean,Number],default:!1}},emits:{"update:selectedKeys":e=>!0,"update:expandedKeys":e=>!0,expand:(e,t)=>!0,expandedChange:e=>!0,select:(e,t,l)=>!0,selectAll:e=>!0,selectionChange:e=>!0,sorterChange:(e,t)=>!0,filterChange:(e,t)=>!0,pageChange:e=>!0,pageSizeChange:e=>!0,change:(e,t)=>!0,cellClick:(e,t,l)=>!0,rowClick:(e,t)=>!0,headerClick:(e,t)=>!0,columnResize:(e,t)=>!0},setup(e,{emit:t,slots:l}){const{columns:a,rowKey:m,rowSelection:o,expandable:s,loadMore:c,filterIconAlignLeft:f,selectedKeys:y,defaultSelectedKeys:u,expandedKeys:_,defaultExpandedKeys:S,defaultExpandAllRows:x,spanMethod:w,draggable:T,summarySpanMethod:p}=_t(e),v=he("table"),O=g(()=>J(e.bordered)?Qe(Qe({},Sl),e.bordered):Cl(Qe({},Sl),{wrapper:e.bordered})),{children:$,components:I}=Pl("TableColumn"),P=g(()=>{var n,r;return(r=(n=o.value)==null?void 0:n.checkStrictly)!=null?r:!0}),j=g(()=>{var n,r,i,h;const b=Boolean(((n=e.scroll)==null?void 0:n.x)||((r=e.scroll)==null?void 0:r.minWidth)),C=Boolean(((i=e.scroll)==null?void 0:i.y)||((h=e.scroll)==null?void 0:h.maxHeight));return{x:b,y:C}}),W=E(),D=E({}),{componentRef:_e,elementRef:ee}=Ye("containerRef"),{componentRef:Le,elementRef:Z}=Ye("containerRef"),{componentRef:me,elementRef:ye}=Ye("viewportRef"),{componentRef:V,elementRef:te}=Ye("containerRef"),R=g(()=>F.value?He.value?ye.value:Z.value:ee.value),F=g(()=>j.value.y||e.stickyHeader||He.value||j.value.x&&N.value.length===0),A=fe(new Map),K=E();ae([I,A],([n,r])=>{if(n.length>0){const i=[];n.forEach(h=>{const b=r.get(h);b&&i.push(b)}),K.value=i}else K.value=void 0});const q=new Map,k=E([]),re=E([]);ae([a,K],([n,r])=>{var i;const h=ka((i=r!=null?r:n)!=null?i:[],q);k.value=h.dataColumns,re.value=h.groupColumns},{immediate:!0,deep:!0});const G=g(()=>["tl","top","tr"].includes(e.pagePosition)),Q=E(!1),oe=E(!1);Hn(()=>{var n,r,i;let h=!1,b=!1;(((n=e.rowSelection)==null?void 0:n.fixed)||((r=e.expandable)==null?void 0:r.fixed)||((i=e.draggable)==null?void 0:i.fixed))&&(h=!0);for(const C of k.value)C.fixed==="left"?h=!0:C.fixed==="right"&&(b=!0);h!==Q.value&&(Q.value=h),b!==oe.value&&(oe.value=b)});const ze=g(()=>{for(const n of k.value)if(n.ellipsis)return!0;return!1}),Ce=n=>{const r={type:n,page:pe.value,pageSize:$e.value,sorter:Se.value,filters:ge.value,dragTarget:n==="drag"?ue.data:void 0};t("change",Tt.value,r)},It=(n,r)=>{Kl.value=Cl(Qe({},ge.value),{[n]:r}),t("filterChange",n,r),Ce("filter")},Ot=(n,r)=>{zl.value=r?{field:n,direction:r}:void 0,t("sorterChange",n,r),Ce("sorter")},{_filters:Kl,computedFilters:ge,resetFilters:Dl,clearFilters:Ll}=er({columns:k,onFilterChange:It}),{_sorter:zl,computedSorter:Se,resetSorters:Ml,clearSorters:Nl}=tr({columns:k,onSorterChange:Ot}),Rt=new Set,Wl=g(()=>{const n=[];Rt.clear();const r=i=>{if(je(i)&&i.length>0)for(const h of i)n.push(h[m.value]),h.disabled&&Rt.add(h[m.value]),h.children&&r(h.children)};return r(e.data),n}),Vl=g(()=>{const n=[],r=i=>{for(const h of i)n.push(h.key),h.children&&r(h.children)};return r(N.value),n}),Pt=g(()=>{const n=[],r=i=>{for(const h of i)h.disabled||n.push(h.key),h.children&&r(h.children)};return r(N.value),n}),{isRadio:ir,selectedRowKeys:ql,currentSelectedRowKeys:Ft,handleSelect:Hl,handleSelectAllLeafs:Gl,handleSelectAll:Ul,select:Yl,selectAll:Xl,clearSelected:Ql}=Ka({selectedKeys:y,defaultSelectedKeys:u,rowSelection:o,currentAllRowKeys:Vl,currentAllEnabledRowKeys:Pt,emit:t}),{expandedRowKeys:kt,handleExpand:Zl,expand:Jl,expandAll:en}=Da({expandedKeys:_,defaultExpandedKeys:S,defaultExpandAllRows:x,expandable:s,allRowKeys:Wl,emit:t}),nt=fe({}),tn=(n,r)=>{n&&(nt[r.key]=n)},ln=n=>{var r,i;for(const h of Object.keys(ge.value)){const b=ge.value[h],C=q.get(h);if(C&&((r=C.filterable)==null?void 0:r.filter)&&b.length>0){const B=(i=C.filterable)==null?void 0:i.filter(b,n.raw);if(!B)return B}}return!0},{dragType:we,dragState:ue,handleDragStart:nn,handleDragEnter:an,handleDragLeave:dr,handleDragover:rn,handleDragEnd:on,handleDrop:un}=Za(T),{resizingColumn:dn,columnWidth:Me,handleThMouseDown:sn}=Ja(D,t),At=g(()=>{var n;const r=i=>{const h=[];for(const b of i){const C={raw:b,key:b[e.rowKey],disabled:b.disabled,expand:b.expand,isLeaf:b.isLeaf};b.children?(C.isLeaf=!1,C.children=r(b.children)):e.loadMore&&!b.isLeaf?(C.isLeaf=!1,nt[C.key]&&(C.children=r(nt[C.key]))):C.isLeaf=!0,C.hasSubtree=Boolean(C.children?e.hideExpandButtonOnEmpty?C.children.length>0:!0:e.loadMore&&!C.isLeaf),h.push(C)}return h};return r((n=e.data)!=null?n:[])}),Et=g(()=>{const n=r=>r.filter(i=>ln(i)?(i.children&&(i.children=n(i.children)),!0):!1);return Object.keys(ge.value).length>0?n(At.value):At.value}),at=g(()=>{var n,r;const i=[...Et.value];if(i.length>0){if((n=Se.value)!=null&&n.field){const h=q.get(Se.value.field);if(h&&((r=h.sortable)==null?void 0:r.sorter)!==!0){const{field:b,direction:C}=Se.value;i.sort((B,z)=>{var U;const ie=B.raw[b],Ue=z.raw[b];if(((U=h.sortable)==null?void 0:U.sorter)&&H(h.sortable.sorter))return h.sortable.sorter(B.raw,z.raw,{dataIndex:b,direction:C});const Oe=ie>Ue?1:-1;return C==="descend"?-Oe:Oe})}}if(ue.dragging&&ue.targetPath.length>0){const h=il(i,ue.sourcePath);il(i,ue.targetPath,h)}}return i}),{page:pe,pageSize:$e,handlePageChange:cn,handlePageSizeChange:fn}=La(e,t),vn=g(()=>{var n,r;return(r=(n=o.value)==null?void 0:n.onlyCurrent)!=null?r:!1});ae(pe,(n,r)=>{n!==r&&vn.value&&Ql()});const N=g(()=>e.pagination&&at.value.length>$e.value?at.value.slice((pe.value-1)*$e.value,pe.value*$e.value):at.value),Tt=g(()=>N.value.map(n=>n.raw)),hn=()=>k.value.reduce((n,r,i)=>{if(r.dataIndex)if(i===0)n[r.dataIndex]=e.summaryText;else{let h=0,b=!1;N.value.forEach(C=>{r.dataIndex&&(se(C.raw[r.dataIndex])?h+=C.raw[r.dataIndex]:!Ee(C.raw[r.dataIndex])&&!wl(C.raw[r.dataIndex])&&(b=!0))}),n[r.dataIndex]=b?"":h}return n},{}),Bt=n=>{if(n&&n.length>0)return n.map(r=>({raw:r,key:r[e.rowKey]}))},be=g(()=>{if(e.summary)return H(e.summary)?Bt(e.summary({columns:k.value,data:Tt.value})):Bt([hn()])}),Ne=E(0),We=E(!0),Ve=E(!0),rt=()=>{let n=!0,r=!0;const i=R.value;i&&(n=Ne.value===0,r=Math.ceil(Ne.value+i.offsetWidth)>=i.scrollWidth),n!==We.value&&(We.value=n),r!==Ve.value&&(Ve.value=r)},mn=()=>We.value&&Ve.value?`${v}-scroll-position-both`:We.value?`${v}-scroll-position-left`:Ve.value?`${v}-scroll-position-right`:`${v}-scroll-position-middle`,yn=()=>{const n=[];return Q.value&&n.push(`${v}-has-fixed-col-left`),oe.value&&n.push(`${v}-has-fixed-col-right`),n},jt=n=>{n.target.scrollLeft!==Ne.value&&(Ne.value=n.target.scrollLeft),rt()},Kt=n=>{jt(n);const{scrollLeft:r}=n.target;te.value&&(te.value.scrollLeft=r),W.value&&(W.value.scrollLeft=r)},Dt=(n,r)=>{t("rowClick",n.raw,r)},Lt=(n,r,i)=>{t("cellClick",n.raw,r,i)},gn=(n,r)=>{t("headerClick",n,r)},L=g(()=>{var n,r;const i=[],h=Q.value||oe.value;let b,C,B;((n=e.draggable)==null?void 0:n.type)==="handle"&&(b={name:"drag-handle",title:e.draggable.title,width:e.draggable.width,fixed:e.draggable.fixed||h},i.push(b)),e.expandable&&(C={name:"expand",title:e.expandable.title,width:e.expandable.width,fixed:e.expandable.fixed||h},i.push(C)),e.rowSelection&&(B={name:e.rowSelection.type==="radio"?"selection-radio":"selection-checkbox",title:e.rowSelection.title,width:e.rowSelection.width,fixed:e.rowSelection.fixed||h},i.push(B));const z=(r=e.components)==null?void 0:r.operations;return H(z)?z({dragHandle:b,expand:C,selection:B}):i}),bn=g(()=>{var n,r,i,h;if(j.value.x){const b={width:se((n=e.scroll)==null?void 0:n.x)?`${(r=e.scroll)==null?void 0:r.x}px`:(i=e.scroll)==null?void 0:i.x};return(h=e.scroll)!=null&&h.minWidth&&(b.minWidth=se(e.scroll.minWidth)?`${e.scroll.minWidth}px`:e.scroll.minWidth),b}}),qe=g(()=>{var n,r,i,h;if(j.value.x&&N.value.length>0){const b={width:se((n=e.scroll)==null?void 0:n.x)?`${(r=e.scroll)==null?void 0:r.x}px`:(i=e.scroll)==null?void 0:i.x};return(h=e.scroll)!=null&&h.minWidth&&(b.minWidth=se(e.scroll.minWidth)?`${e.scroll.minWidth}px`:e.scroll.minWidth),b}});Rl(xe,fe({loadMore:c,addLazyLoadData:tn,slots:l,sorter:Se,filters:ge,filterIconAlignLeft:f,resizingColumn:dn,checkStrictly:P,currentAllEnabledRowKeys:Pt,currentSelectedRowKeys:Ft,addColumn:(n,r)=>{A.set(n,r)},removeColumn:n=>{A.delete(n)},onSelectAll:Ul,onSelect:Hl,onSelectAllLeafs:Gl,onSorterChange:Ot,onFilterChange:It,onThMouseDown:sn}));const zt=g(()=>[v,`${v}-size-${e.size}`,{[`${v}-border`]:O.value.wrapper,[`${v}-border-cell`]:O.value.cell,[`${v}-border-header-cell`]:!O.value.cell&&O.value.headerCell,[`${v}-border-body-cell`]:!O.value.cell&&O.value.bodyCell,[`${v}-stripe`]:e.stripe,[`${v}-hover`]:e.hoverable,[`${v}-dragging`]:ue.dragging,[`${v}-type-selection`]:Boolean(e.rowSelection),[`${v}-empty`]:e.data&&N.value.length===0,[`${v}-layout-fixed`]:e.tableLayoutFixed||j.value.x||F.value||ze.value}]),xn=g(()=>[`${v}-pagination`,{[`${v}-pagination-left`]:e.pagePosition==="tl"||e.pagePosition==="bl",[`${v}-pagination-center`]:e.pagePosition==="top"||e.pagePosition==="bottom",[`${v}-pagination-right`]:e.pagePosition==="tr"||e.pagePosition==="br",[`${v}-pagination-top`]:G.value}]),_n=g(()=>{const n=yn();return j.value.x&&n.push(mn()),F.value&&n.push(`${v}-scroll-y`),n}),He=g(()=>Boolean(e.virtualListProps)),ot=E({}),Mt=()=>{const n={};for(const r of Object.keys(D.value))n[r]=D.value[r].offsetWidth;ot.value=n},Ie=E(!1),Nt=()=>Z.value?Z.value.offsetWidth>Z.value.clientWidth:!1,Cn=()=>{const n=Nt();Ie.value!==n&&(Ie.value=n),rt(),Mt()};pl(()=>{Ie.value=Nt(),Mt()});const Sn=g(()=>J(e.loading)?e.loading:{loading:e.loading}),wn=()=>d(ne,{empty:!0},{default:()=>[d(ce,{colSpan:k.value.length+L.value.length},{default:()=>{var n,r;return[(r=(n=l.empty)==null?void 0:n.call(l))!=null?r:d(Un,null,null)]}})]}),pn=n=>{var r;if(n.expand)return H(n.expand)?n.expand():n.expand;if(l["expand-row"])return l["expand-row"]({record:n.raw});if((r=e.expandable)!=null&&r.expandedRowRender)return e.expandable.expandedRowRender(n.raw)},Wt=g(()=>[].concat(L.value,k.value)),$n=g(()=>e.spanAll?Wt.value:k.value),{tableSpan:Vt,removedCells:qt}=bl({spanMethod:w,data:N,columns:$n}),{tableSpan:Ht,removedCells:Gt}=bl({spanMethod:p,data:N,columns:Wt}),Ge=n=>{if(!(!He.value||!n||!ot.value[n]))return{width:`${ot.value[n]}px`}},In=(n,r)=>d(ne,{key:`table-summary-${r}`,class:[`${v}-tr-summary`,H(e.rowClass)?e.rowClass(n,r):e.rowClass],onClick:i=>Dt(n,i)},{default:()=>[L.value.map((i,h)=>{var b;const C=`${r}-${h}`,[B,z]=(b=Ht.value[C])!=null?b:[1,1];if(Gt.value.includes(C))return null;const U=Ge(i.name);return d(ml,{style:U,operationColumn:i,operations:L.value,record:n,rowSpan:B,colSpan:z,summary:!0},null)}),k.value.map((i,h)=>{var b;const C=`${r}-${L.value.length+h}`,[B,z]=(b=Ht.value[C])!=null?b:[1,1];if(Gt.value.includes(C))return null;const U=Ge(i.dataIndex);return d(ce,{key:`td-${C}`,style:U,rowIndex:r,record:n,column:i,operations:L.value,dataColumns:k.value,rowSpan:B,colSpan:z,summary:!0,onClick:ie=>Lt(n,i,ie)},{td:l.td,cell:l["summary-cell"]})})],tr:l.tr}),Ut=()=>be.value?d("tfoot",null,[be.value.map((n,r)=>In(n,r))]):null,Yt=(n,r=!0)=>{var i,h,b,C,B;const z=n.key,U=kt.value.includes(z);return d("button",{type:"button",class:`${v}-expand-btn`,onClick:ie=>{Zl(z,n.raw),r&&ie.stopPropagation()}},[(B=(C=(i=l["expand-icon"])==null?void 0:i.call(l,{expanded:U,record:n.raw}))!=null?C:(b=(h=e.expandable)==null?void 0:h.icon)==null?void 0:b.call(h,U,n.raw))!=null?B:U?d(Il,null,null):d($l,null,null)])},On=(n,{indentSize:r,indexPath:i,allowDrag:h,expandContent:b})=>{var C;if(n.hasSubtree)return(C=n.children)==null?void 0:C.map((B,z)=>ut(B,z,{indentSize:r,indexPath:i,allowDrag:h}));if(b){const B=R.value;return d(ne,{key:`${n.key}-expand`,expand:!0},{default:()=>[d(ce,{isFixedExpand:Q.value||oe.value,containerWidth:B==null?void 0:B.clientWidth,colSpan:k.value.length+L.value.length},ur(b)?b:{default:()=>[b]})]})}return null},ut=(n,r,{indentSize:i=0,indexPath:h,allowDrag:b=!0}={})=>{var C;const B=n.key,z=(h!=null?h:[]).concat(r),U=pn(n),ie=kt.value.includes(B),Ue=ue.sourceKey===n.key,Oe=we.value?{draggable:b,onDragstart:M=>{!b||nn(M,n.key,z,n.raw)},onDragend:M=>{!b||on(M)}}:{},Fn=we.value?{onDragenter:M=>{!b||an(M,z)},onDragover:M=>{!b||rn(M)},onDrop:M=>{!b||(Ce("drag"),un(M))}}:{};return d(Te,null,[d(ne,le({key:B,class:[{[`${v}-tr-draggable`]:we.value==="row",[`${v}-tr-drag`]:Ue},H(e.rowClass)?e.rowClass(n,r):e.rowClass],rowIndex:r,record:n,checked:(C=ql.value)==null?void 0:C.includes(B),onClick:M=>Dt(n,M)},we.value==="row"?Oe:{},Fn),{default:()=>[L.value.map((M,de)=>{var Re;const Pe=`${r}-${de}`,[it,dt]=e.spanAll?(Re=Vt.value[Pe])!=null?Re:[1,1]:[1,1];if(e.spanAll&&qt.value.includes(Pe))return null;const st=Ge(M.name);return d(ml,le({key:`operation-td-${de}`,style:st,operationColumn:M,operations:L.value,record:n,hasExpand:Boolean(U),selectedRowKeys:Ft.value,rowSpan:it,colSpan:dt,renderExpandBtn:Yt},we.value==="handle"?Oe:{}),{"drag-handle-icon":l["drag-handle-icon"]})}),k.value.map((M,de)=>{var Re;const Pe=`${r}-${e.spanAll?L.value.length+de:de}`,[it,dt]=(Re=Vt.value[Pe])!=null?Re:[1,1];if(qt.value.includes(Pe))return null;const st=de===0?{showExpandBtn:n.hasSubtree,indentSize:n.hasSubtree?i-20:i}:{},kn=Ge(M.dataIndex);return d(ce,le({key:`td-${de}`,style:kn,rowIndex:r,record:n,column:M,operations:L.value,dataColumns:k.value,rowSpan:it,renderExpandBtn:Yt,colSpan:dt},st,{onClick:An=>Lt(n,M,An)}),{td:l.td})})],tr:l.tr}),ie&&On(n,{indentSize:i+e.indentSize,indexPath:z,allowDrag:b&&!Ue,expandContent:U})])},Xt=()=>{const n=N.value.some(r=>Boolean(r.hasSubtree));return d(Je,null,{default:()=>[N.value.length>0?N.value.map((r,i)=>ut(r,i,{indentSize:n?20:0})):wn()],tbody:l.tbody})},Qt=()=>d(Ze,null,{default:()=>[re.value.map((n,r)=>d(ne,{key:`header-row-${r}`},{default:()=>[r===0&&L.value.map((i,h)=>{var b;return d(Qa,{key:`operation-th-${h}`,ref:C=>{(C==null?void 0:C.$el)&&i.name&&(D.value[i.name]=C.$el)},operationColumn:i,operations:L.value,selectAll:Boolean(i.name==="selection-checkbox"&&((b=e.rowSelection)==null?void 0:b.showCheckedAll)),rowSpan:re.value.length},null)}),n.map((i,h)=>{const b=e.columnResizable&&Boolean(i.dataIndex)&&h<n.length-1;return d(et,{key:`th-${h}`,ref:C=>{(C==null?void 0:C.$el)&&i.dataIndex&&(D.value[i.dataIndex]=C.$el)},column:i,operations:L.value,dataColumns:k.value,resizable:b,onClick:C=>gn(i,C)},{th:l.th})})]}))],thead:l.thead}),Rn=()=>{if(F.value){const n={};return Ie.value&&(n.overflowY="scroll"),se(e.stickyHeader)&&(n.top=`${e.stickyHeader}px`),d(Te,null,[e.showHeader&&d(vt,{ref:V,class:[`${v}-header`,{[`${v}-header-sticky`]:e.stickyHeader}],style:n,hide:N.value.length!==0},{default:()=>[d("table",{class:`${v}-element`,style:bn.value,cellpadding:0,cellspacing:0},[d(Xe,{dataColumns:k.value,operations:L.value,columnWidth:Me},null),Qt()])]}),d(al,{onResize:Cn},{default:()=>{var r,i;return[He.value?d(na,le({ref:h=>{h!=null&&h.$el&&(Z.value=h.$el)},class:`${v}-body`,data:N.value,itemKey:"_key",component:{list:"table",content:"tbody"},listAttrs:{class:`${v}-element`,style:qe.value},paddingPosition:"list"},e.virtualListProps,{onScroll:Kt}),{item:({item:h,index:b})=>ut(h,b)}):d(vt,{ref:Le,class:`${v}-body`,style:{maxHeight:se((r=e.scroll)==null?void 0:r.y)?`${(i=e.scroll)==null?void 0:i.y}px`:"100%"},outerStyle:{display:"flex",minHeight:"0"},onScroll:Kt},{default:()=>[d("table",{class:`${v}-element`,style:qe.value,cellpadding:0,cellspacing:0},[N.value.length!==0&&d(Xe,{dataColumns:k.value,operations:L.value,columnWidth:Me},null),Xt()])]})]}}),be.value&&be.value.length&&d("div",{ref:W,class:`${v}-tfoot`,style:{overflowY:Ie.value?"scroll":"hidden"}},[d("table",{class:`${v}-element`,style:qe.value,cellpadding:0,cellspacing:0},[d(Xe,{dataColumns:k.value,operations:L.value,columnWidth:Me},null),Ut()])])])}return d(al,{onResize:()=>rt()},{default:()=>[d("table",{class:`${v}-element`,cellpadding:0,cellspacing:0,style:qe.value},[d(Xe,{dataColumns:k.value,operations:L.value,columnWidth:Me},null),e.showHeader&&Qt(),Xt(),be.value&&be.value.length&&Ut()])]})},Zt=n=>{var r;const i=(r=e.scroll)!=null&&r.maxHeight?{maxHeight:e.scroll.maxHeight}:void 0;return d(Te,null,[d("div",{class:[`${v}-container`,_n.value]},[d(vt,{ref:_e,class:[`${v}-content`,{[`${v}-content-scroll-x`]:!F.value}],style:i,outerStyle:{height:"100%"},onScroll:jt},{default:()=>[n?d("table",{class:`${v}-element`,cellpadding:0,cellspacing:0},[n()]):Rn()]})]),l.footer&&d("div",{class:`${v}-footer`},[l.footer()])])},Jt=()=>{var n,r;const i=J(e.pagination)?Gn(e.pagination,["current","pageSize","defaultCurrent","defaultPageSize"]):{};return d("div",{class:xn.value},[(n=l["pagination-left"])==null?void 0:n.call(l),d(la,le({total:Et.value.length,current:pe.value,pageSize:$e.value,onChange:h=>{cn(h),Ce("pagination")},onPageSizeChange:h=>{fn(h),Ce("pagination")}},i),null),(r=l["pagination-right"])==null?void 0:r.call(l)])},Pn=g(()=>{var n,r;if(Ol((n=e.scroll)==null?void 0:n.y))return{height:(r=e.scroll)==null?void 0:r.y}});return{render:()=>{var n;return l.default?d("div",{class:zt.value},[Zt(l.default)]):($.value=(n=l.columns)==null?void 0:n.call(l),d("div",{class:zt.value,style:Pn.value},[$.value,d(ea,Sn.value,{default:()=>[e.pagination!==!1&&N.value.length>0&&G.value&&Jt(),Zt(),e.pagination!==!1&&N.value.length>0&&!G.value&&Jt()]})]))},selfExpand:Jl,selfExpandAll:en,selfSelect:Yl,selfSelectAll:Xl,selfResetFilters:Dl,selfClearFilters:Ll,selfResetSorters:Ml,selfClearSorters:Nl}},methods:{selectAll(e){return this.selfSelectAll(e)},select(e,t){return this.selfSelect(e,t)},expandAll(e){return this.selfExpandAll(e)},expand(e,t){return this.selfExpand(e,t)},resetFilters(e){return this.selfResetFilters(e)},clearFilters(e){return this.selfClearFilters(e)},resetSorters(){return this.selfResetSorters()},clearSorters(){return this.selfClearSorters()}},render(){return this.render()}});const Y=(e,t)=>{const l=Yn(e,t),a=E(l.value);return ae(l,(m,o)=>{Ct(m,o)||(a.value=m)}),a};var bt=X({name:"TableColumn",props:{dataIndex:String,title:String,width:Number,align:{type:String},fixed:{type:String},ellipsis:{type:Boolean,default:!1},sortable:{type:Object,default:void 0},filterable:{type:Object,default:void 0},cellClass:{type:[String,Array,Object]},headerCellClass:{type:[String,Array,Object]},bodyCellClass:{type:[String,Array,Object,Function]},summaryCellClass:{type:[String,Array,Object,Function]},cellStyle:{type:Object},headerCellStyle:{type:Object},bodyCellStyle:{type:[Object,Function]},summaryCellStyle:{type:[Object,Function]},index:{type:Number},tooltip:{type:[Boolean,Object],default:!1}},setup(e,{slots:t}){var l;const{dataIndex:a,title:m,width:o,align:s,fixed:c,ellipsis:f,index:y}=_t(e),u=Y(e,"sortable"),_=Y(e,"filterable"),S=Y(e,"cellClass"),x=Y(e,"headerCellClass"),w=Y(e,"bodyCellClass"),T=Y(e,"summaryCellClass"),p=Y(e,"cellStyle"),v=Y(e,"headerCellStyle"),O=Y(e,"bodyCellStyle"),$=Y(e,"summaryCellStyle"),I=Y(e,"tooltip"),P=Qn(),j=ve(xe,{}),W=ve(dl,void 0),{children:D,components:_e}=Pl("TableColumn"),ee=fe(new Map);Rl(dl,{addChild:(V,te)=>{ee.set(V,te)},removeChild:V=>{ee.delete(V)}});const me=E();ae([_e,ee],([V,te])=>{if(V.length>0){const R=[];V.forEach(F=>{const A=te.get(F);A&&R.push(A)}),me.value=R}else me.value=void 0});const ye=fe({dataIndex:a,title:m,width:o,align:s,fixed:c,ellipsis:f,sortable:u,filterable:_,cellClass:S,headerCellClass:x,bodyCellClass:w,summaryCellClass:T,cellStyle:p,headerCellStyle:v,bodyCellStyle:O,summaryCellStyle:$,index:y,tooltip:I,children:me,slots:t});return P&&(W?W.addChild(P.uid,ye):(l=j.addColumn)==null||l.call(j,P.uid,ye)),Xn(()=>{var V;P&&(W?W.removeChild(P.uid):(V=j.removeColumn)==null||V.call(j,P.uid))}),()=>{var V;return D.value=(V=t.default)==null?void 0:V.call(t),D.value}}});const xr=Object.assign(gt,{Thead:Ze,Tbody:Je,Tr:ne,Th:et,Td:ce,Column:bt,install:(e,t)=>{Zn(e,t);const l=Jn(t);e.component(l+gt.name,gt),e.component(l+Ze.name,Ze),e.component(l+Je.name,Je),e.component(l+ne.name,ne),e.component(l+et.name,et),e.component(l+ce.name,ce),e.component(l+bt.name,bt)}});export{wt as T,xr as a,bt as b};
