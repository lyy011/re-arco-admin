import{Q as Ee,a7 as je,R as _l,E as g,r as E,S as Z,d as Y,m as Fn,o as Fe,e as ke,$ as Te,al as Zt,n as kn,ad as el,h as d,l as ve,D as be,z as Cl,aY as An,W as le,ah as tl,aO as tt,N as _t,av as En,a6 as fe,aA as Tn,X as Bn,gV as jn,aS as Kn,gW as Dn,gX as Ln,B as ll,V as H,I as zn,aZ as Sl,bj as wl,aJ as Wn,b as ce,ar as ct,as as ft,a8 as pl,bm as Mn,ap as Nn,a9 as de,aa as $l,aM as vt,T as Vn,aN as qn,an as Hn,ai as Gn,y as Un,a4 as Xn,a5 as Yn}from"./index.4f8fb45a.js";import{S as Jn}from"./index.3f79fe72.js";import{T as Qn,b as Ol,a as Xe,P as Zn,R as nl,V as ea,f as ta}from"./index.c8dbf137.js";import{C as Be}from"./index.0a39f9f7.js";import{R as xt}from"./index.71f26a7b.js";import{g as la}from"./get-value-by-path.79399e20.js";var Ke=function(e){return function(t){return Math.pow(t,e)}},De=function(e){return function(t){return 1-Math.abs(Math.pow(t-1,e))}},lt=function(e){return function(t){return t<.5?Ke(e)(t*2)/2:De(e)(t*2-1)/2+.5}},na=function(e){return e},aa=Ke(2),ra=De(2),oa=lt(2),ua=Ke(3),ia=De(3),da=lt(3),sa=Ke(4),ca=De(4),fa=lt(4),va=Ke(5),ha=De(5),ma=lt(5),ya=function(e){return 1+Math.sin(Math.PI/2*e-Math.PI/2)},ga=function(e){return Math.sin(Math.PI/2*e)},ba=function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2},Ct=function(e){var t=7.5625,l=2.75;return e<1/l?t*e*e:e<2/l?(e-=1.5/l,t*e*e+.75):e<2.5/l?(e-=2.25/l,t*e*e+.9375):(e-=2.625/l,t*e*e+.984375)},Il=function(e){return 1-Ct(1-e)},xa=function(e){return e<.5?Il(e*2)*.5:Ct(e*2-1)*.5+.5},_a=Object.freeze({linear:na,quadIn:aa,quadOut:ra,quadInOut:oa,cubicIn:ua,cubicOut:ia,cubicInOut:da,quartIn:sa,quartOut:ca,quartInOut:fa,quintIn:va,quintOut:ha,quintInOut:ma,sineIn:ya,sineOut:ga,sineInOut:ba,bounceOut:Ct,bounceIn:Il,bounceInOut:xa}),St=function(t){var l=t.from,a=t.to,m=t.duration,o=t.delay,s=t.easing,f=t.onStart,c=t.onUpdate,y=t.onFinish;for(var u in l)a[u]===void 0&&(a[u]=l[u]);for(var _ in a)l[_]===void 0&&(l[_]=a[_]);this.from=l,this.to=a,this.duration=m||500,this.delay=o||0,this.easing=s||"linear",this.onStart=f,this.onUpdate=c||function(){},this.onFinish=y,this.startTime=Date.now()+this.delay,this.started=!1,this.finished=!1,this.timer=null,this.keys={}};St.prototype.update=function(){if(this.time=Date.now(),!(this.time<this.startTime)&&!this.finished){if(this.elapsed===this.duration){this.finished||(this.finished=!0,this.onFinish&&this.onFinish(this.keys));return}this.elapsed=this.time-this.startTime,this.elapsed=this.elapsed>this.duration?this.duration:this.elapsed;for(var t in this.to)this.keys[t]=this.from[t]+(this.to[t]-this.from[t])*_a[this.easing](this.elapsed/this.duration);this.started||(this.onStart&&this.onStart(this.keys),this.started=!0),this.onUpdate(this.keys)}};St.prototype.start=function(){var t=this;this.startTime=Date.now()+this.delay;var l=function(){t.update(),t.timer=requestAnimationFrame(l),t.finished&&(cancelAnimationFrame(t.timer),t.timer=null)};l()};St.prototype.stop=function(){cancelAnimationFrame(this.timer),this.timer=null};var Ca=Object.defineProperty,Sa=Object.defineProperties,wa=Object.getOwnPropertyDescriptors,al=Object.getOwnPropertySymbols,pa=Object.prototype.hasOwnProperty,$a=Object.prototype.propertyIsEnumerable,rl=(e,t,l)=>t in e?Ca(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,Oa=(e,t)=>{for(var l in t||(t={}))pa.call(t,l)&&rl(e,l,t[l]);if(al)for(var l of al(t))$a.call(t,l)&&rl(e,l,t[l]);return e},Ia=(e,t)=>Sa(e,wa(t));const Pa=e=>{let t=0;const l=a=>{if(je(a)&&a.length>0)for(const m of a)m.children?l(m.children):t+=1};return l(e),t},Pl=e=>{let t=0;if(je(e)&&e.length>0){t=1;for(const l of e)if(l.children){const a=Pl(l.children);a>0&&(t=Math.max(t,a+1))}}return t},ol=(e,t)=>{let{parent:l}=e;for(;l;)l.fixed===t&&(t==="left"?l.isLastLeftFixed=!0:l.isFirstRightFixed=!0),l=l.parent},Ra=(e,t)=>{const l=Pl(e);t.clear();const a=[],m=[...Array(l)].map(()=>[]);let o,s;const f=(c,{level:y=0,parent:u,fixed:_}={})=>{var S;for(const x of c){const w=Ia(Oa({},x),{parent:u});if(je(w.children)){const T=Pa(w.children);T>1&&(w.colSpan=T),m[y].push(w),f(w.children,{level:y+1,parent:w,fixed:w.fixed})}else{const T=l-y;T>1&&(w.rowSpan=T),(_||w.fixed)&&(w.fixed=(S=w.fixed)!=null?S:_,w.fixed==="left"?o=a.length:Ee(s)&&(s=a.length)),(Ee(w.dataIndex)||_l(w.dataIndex))&&(w.dataIndex=`__arco_data_index_${a.length}`),t.set(w.dataIndex,w),a.push(w),m[y].push(w)}}};return f(e),Ee(o)||(a[o].isLastLeftFixed=!0,ol(a[o],"left")),Ee(s)||(a[s].isFirstRightFixed=!0,ol(a[s],"right")),{dataColumns:a,groupColumns:m}},Fa=(e,t)=>{for(let l=0;l<e.length;l++)if(e[l].name===t)return l;return-1},ka=(e,t)=>{var l;const a=Fa(t,e.name);if(a<=0)return 0;let m=0;const o=t.slice(0,a);for(const s of o)m+=(l=s.width)!=null?l:0;return m},wt=e=>e.children&&e.children.length>0?wt(e.children[0]):e,Aa=e=>e.children&&e.children.length>0?wt(e.children[e.children.length-1]):e,Ea=(e,{dataColumns:t,operations:l})=>{var a,m;let o=0;if(e.fixed==="left"){for(const c of l)o+=(a=c.width)!=null?a:40;const f=wt(e);for(const c of t){if(f.dataIndex===c.dataIndex)break;o+=(m=c.width)!=null?m:0}return o}const s=Aa(e);for(let f=t.length-1;f>0;f--){const c=t[f];if(s.dataIndex===c.dataIndex)break;c.fixed==="right"&&(o+=c.width)}return o},Rl=(e,t)=>t.fixed?[`${e}-col-fixed-left`,{[`${e}-col-fixed-left-last`]:t.isLastLeftFixed}]:[],Fl=(e,t)=>t.fixed==="left"?[`${e}-col-fixed-left`,{[`${e}-col-fixed-left-last`]:t.isLastLeftFixed}]:t.fixed==="right"?[`${e}-col-fixed-right`,{[`${e}-col-fixed-right-first`]:t.isFirstRightFixed}]:[],kl=(e,{dataColumns:t,operations:l})=>{if(e.fixed){const a=`${Ea(e,{dataColumns:t,operations:l})}px`;return e.fixed==="left"?{left:a}:{right:a}}return{}},Al=(e,t)=>e.fixed?{left:`${ka(e,t)}px`}:{},ul=(e,t,l)=>{var a;let m=e;for(let o=0;o<t.length;o++){const s=t[o];if(o>=t.length-1)if(l)m.splice(s,0,l);else return m.splice(s,1)[0];m=(a=m[s].children)!=null?a:[]}},pt=e=>{const t=[];if(e.children)for(const l of e.children)l.isLeaf?t.push(l.key):t.push(...pt(l));return t},Ta=(e,t)=>{let l=!1,a=!1;const m=t.filter(o=>e.includes(o));return m.length>0&&(m.length>=t.length?l=!0:a=!0),{checked:l,indeterminate:a}},Ae=(e,t,l=!1)=>l?e.filter(a=>!t.includes(a)):Array.from(new Set(e.concat(t))),Ba=({selectedKeys:e,defaultSelectedKeys:t,rowSelection:l,currentAllRowKeys:a,currentAllEnabledRowKeys:m,emit:o})=>{var s,f,c;const y=g(()=>{var $;return(($=l.value)==null?void 0:$.type)==="radio"}),u=E((c=(f=t.value)!=null?f:(s=l.value)==null?void 0:s.defaultSelectedRowKeys)!=null?c:[]),_=g(()=>{var $,O,R;return(R=(O=e.value)!=null?O:($=l.value)==null?void 0:$.selectedRowKeys)!=null?R:u.value}),S=g(()=>_.value.filter($=>a.value.includes($)));return{isRadio:y,selectedRowKeys:_,currentSelectedRowKeys:S,handleSelectAll:$=>{const O=Ae(_.value,m.value,!$);u.value=O,o("selectAll",$),o("selectionChange",O),o("update:selectedKeys",O)},handleSelect:($,O)=>{const R=y.value?[O.key]:Ae(_.value,[O.key],!$);u.value=R,o("select",R,O.key,O.raw),o("selectionChange",R),o("update:selectedKeys",R)},handleSelectAllLeafs:($,O)=>{const R=Ae(_.value,pt($),!O);u.value=R,o("select",R,$.key,$.raw),o("selectionChange",R),o("update:selectedKeys",R)},select:($,O=!0)=>{const R=[].concat($),j=y.value?R:Ae(_.value,R,!O);u.value=j,o("selectionChange",j),o("update:selectedKeys",j)},selectAll:($=!0)=>{const O=Ae(_.value,m.value,!$);u.value=O,o("selectionChange",O),o("update:selectedKeys",O)},clearSelected:()=>{u.value=[],o("selectionChange",[]),o("update:selectedKeys",[])}}},ja=({expandedKeys:e,defaultExpandedKeys:t,defaultExpandAllRows:l,expandable:a,allRowKeys:m,emit:o})=>{const f=E((()=>{var S,x;return t.value?t.value:(S=a.value)!=null&&S.defaultExpandedRowKeys?a.value.defaultExpandedRowKeys:l.value||((x=a.value)==null?void 0:x.defaultExpandAllRows)?[...m.value]:[]})()),c=g(()=>{var S,x,w;return(w=(x=e.value)!=null?x:(S=a.value)==null?void 0:S.expandedRowKeys)!=null?w:f.value});return{expandedRowKeys:c,handleExpand:(S,x)=>{const T=c.value.includes(S)?c.value.filter(p=>S!==p):c.value.concat(S);f.value=T,o("expand",S,x),o("expandedChange",T),o("update:expandedKeys",T)},expand:(S,x=!0)=>{const w=[].concat(S),T=x?c.value.concat(w):c.value.filter(p=>!w.includes(p));f.value=T,o("expandedChange",T),o("update:expandedKeys",T)},expandAll:(S=!0)=>{const x=S?[...m.value]:[];f.value=x,o("expandedChange",x),o("update:expandedKeys",x)}}},Ka=(e,t)=>{var l,a;const m=E(Z(e.pagination)&&(l=e.pagination.defaultCurrent)!=null?l:1),o=E(Z(e.pagination)&&(a=e.pagination.defaultPageSize)!=null?a:10),s=g(()=>{var u;return Z(e.pagination)&&(u=e.pagination.pageSize)!=null?u:o.value});return{page:g(()=>{var u;return Z(e.pagination)&&(u=e.pagination.current)!=null?u:m.value}),pageSize:s,handlePageChange:u=>{m.value=u,t("pageChange",u)},handlePageSizeChange:u=>{o.value=u,t("pageSizeChange",u)}}},Da=Y({name:"ColGroup",props:{dataColumns:{type:Array,required:!0},operations:{type:Array,required:!0},columnWidth:{type:Object}},setup(){return{fixedWidth:t=>{if(t)return{width:`${t}px`,minWidth:`${t}px`,maxWidth:`${t}px`}}}}});function La(e,t,l,a,m,o){return Fe(),ke("colgroup",null,[(Fe(!0),ke(Te,null,Zt(e.operations,s=>(Fe(),ke("col",{key:`arco-col-${s.name}`,class:kn(`arco-table-${s.name}-col`),style:el(e.fixedWidth(s.width))},null,6))),128)),(Fe(!0),ke(Te,null,Zt(e.dataColumns,s=>(Fe(),ke("col",{key:`arco-col-${s.dataIndex}`,style:el(e.fixedWidth(e.columnWidth&&s.dataIndex&&e.columnWidth[s.dataIndex]||s.width))},null,4))),128))])}var Ye=Fn(Da,[["render",La]]),Qe=Y({name:"Thead",setup(e,{slots:t}){return()=>{var l,a,m;return d((a=(l=t.thead)==null?void 0:l.call(t)[0])!=null?a:"thead",null,(m=t.default)==null?void 0:m.call(t))}}}),Ze=Y({name:"Tbody",setup(e,{slots:t}){return()=>{var l,a,m;return d((a=(l=t.tbody)==null?void 0:l.call(t)[0])!=null?a:"tbody",null,(m=t.default)==null?void 0:m.call(t))}}}),ne=Y({name:"Tr",props:{expand:{type:Boolean},empty:{type:Boolean},checked:{type:Boolean},rowIndex:Number,record:{type:Object,default:()=>({})}},setup(e,{slots:t}){const l=ve("table"),a=g(()=>[`${l}-tr`,{[`${l}-tr-expand`]:e.expand,[`${l}-tr-empty`]:e.empty,[`${l}-tr-checked`]:e.checked}]);return()=>{var m,o,s,f;return d((s=(o=t.tr)==null?void 0:o.call(t,{rowIndex:e.rowIndex,record:(m=e.record)==null?void 0:m.raw})[0])!=null?s:"tr",{class:a.value},(f=t.default)==null?void 0:f.call(t))}}});const za=({column:e,tableCtx:t})=>{const l=g(()=>{var y;if(e.value.dataIndex&&e.value.dataIndex===((y=t.sorter)==null?void 0:y.field))return t.sorter.direction}),a=g(()=>{var y,u,_;return(_=(u=(y=e.value)==null?void 0:y.sortable)==null?void 0:u.sortDirections)!=null?_:[]}),m=g(()=>a.value.length>0),o=g(()=>a.value.includes("ascend")),s=g(()=>a.value.includes("descend")),f=g(()=>{var y,u;return l.value?l.value===a.value[0]&&(u=a.value[1])!=null?u:"":(y=a.value[0])!=null?y:""});return{sortOrder:l,hasSorter:m,hasAscendBtn:o,hasDescendBtn:s,nextSortOrder:f,handleClickSorter:y=>{var u;e.value.dataIndex&&((u=t.onSorterChange)==null||u.call(t,e.value.dataIndex,f.value,y))}}},Wa=({column:e,tableCtx:t})=>{const l=g(()=>{var x;return e.value.dataIndex&&((x=t.filters)==null?void 0:x[e.value.dataIndex])?t.filters[e.value.dataIndex]:[]}),a=E(!1),m=g(()=>l.value.length>0),o=g(()=>{var x;return Boolean((x=e.value.filterable)==null?void 0:x.multiple)}),s=E(l.value);be(l,x=>{je(x)&&String(x)!==String(s.value)&&(s.value=x)});const f=x=>{a.value=x},c=x=>{s.value=x};return{filterPopupVisible:a,isFilterActive:m,isMultipleFilter:o,columnFilterValue:s,handleFilterPopupVisibleChange:f,setFilterValue:c,handleCheckboxFilterChange:x=>{c(x)},handleRadioFilterChange:x=>{c([x])},handleFilterConfirm:x=>{var w;e.value.dataIndex&&((w=t.onFilterChange)==null||w.call(t,e.value.dataIndex,s.value,x)),f(!1)},handleFilterReset:x=>{var w;c([]),e.value.dataIndex&&((w=t.onFilterChange)==null||w.call(t,e.value.dataIndex,s.value,x)),f(!1)}}},xe=Symbol("ArcoTable"),il=Symbol("ArcoTableColumn");function dl(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!tt(e)}var El=Y({name:"AutoTooltip",inheritAttrs:!1,props:{tooltipProps:{type:Object}},setup(e,{attrs:t,slots:l}){const a=ve("auto-tooltip"),m=E(),o=E(),s=E(""),f=E(!1),c=()=>{if(m.value&&o.value){const S=o.value.offsetWidth>m.value.offsetWidth;S!==f.value&&(f.value=S)}},y=()=>{var S;((S=o.value)==null?void 0:S.textContent)&&o.value.textContent!==s.value&&(s.value=o.value.textContent)},u=()=>{y(),c()};Cl(()=>{y(),c()}),An(()=>{y()});const _=()=>d("span",le({ref:m,class:a},t),[d(tl,{onResize:u},{default:()=>{var S;return[d("span",{ref:o,class:`${a}-content`},[(S=l.default)==null?void 0:S.call(l)])]}})]);return()=>{let S;if(f.value){let x;return d(Qn,le({content:s.value,onResize:u},e.tooltipProps),dl(x=_())?x:{default:()=>[x]})}return d(tl,{onResize:u},dl(S=_())?S:{default:()=>[S]})}}}),Ma=Object.defineProperty,sl=Object.getOwnPropertySymbols,Na=Object.prototype.hasOwnProperty,Va=Object.prototype.propertyIsEnumerable,cl=(e,t,l)=>t in e?Ma(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,ht=(e,t)=>{for(var l in t||(t={}))Na.call(t,l)&&cl(e,l,t[l]);if(sl)for(var l of sl(t))Va.call(t,l)&&cl(e,l,t[l]);return e};function mt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!tt(e)}var et=Y({name:"Th",props:{column:{type:Object,default:()=>({})},operations:{type:Array,default:()=>[]},dataColumns:{type:Array,default:()=>[]},resizable:Boolean},setup(e,{slots:t}){const{column:l}=_t(e),a=ve("table"),{t:m}=En(),o=fe(xe,{}),s=g(()=>{var P;return((P=e.column)==null?void 0:P.dataIndex)&&o.resizingColumn===e.column.dataIndex}),f=g(()=>{var P;if(Z((P=e.column)==null?void 0:P.tooltip))return e.column.tooltip}),c=g(()=>{var P;return((P=e.column)==null?void 0:P.filterable)&&Tn(e.column.filterable.alignLeft)?e.column.filterable.alignLeft:o.filterIconAlignLeft}),{sortOrder:y,hasSorter:u,hasAscendBtn:_,hasDescendBtn:S,nextSortOrder:x,handleClickSorter:w}=za({column:l,tableCtx:o}),{filterPopupVisible:T,isFilterActive:p,isMultipleFilter:v,columnFilterValue:I,handleFilterPopupVisibleChange:$,setFilterValue:O,handleCheckboxFilterChange:R,handleRadioFilterChange:j,handleFilterConfirm:N,handleFilterReset:D}=Wa({column:l,tableCtx:o}),_e=()=>{var P,F,A,K,q;let k,ae;const{filterable:G}=e.column;return(P=e.column.slots)!=null&&P["filter-content"]?(F=e.column.slots)==null?void 0:F["filter-content"]({filterValue:I.value,setFilterValue:O,handleFilterConfirm:N,handleFilterReset:D}):G!=null&&G.slotName?(K=(A=o==null?void 0:o.slots)==null?void 0:A[G==null?void 0:G.slotName])==null?void 0:K.call(A,{filterValue:I.value,setFilterValue:O,handleFilterConfirm:N,handleFilterReset:D}):G!=null&&G.renderContent?G.renderContent({filterValue:I.value,setFilterValue:O,handleFilterConfirm:N,handleFilterReset:D}):d("div",{class:`${a}-filters-content`},[d("ul",{class:`${a}-filters-list`},[(q=G==null?void 0:G.filters)==null?void 0:q.map((J,re)=>{var ze;return d("li",{class:`${a}-filters-item`,key:re},[v.value?d(Be,{value:J.value,modelValue:I.value,uninjectGroupContext:!0,onChange:R},{default:()=>[J.text]}):d(xt,{value:J.value,modelValue:(ze=I.value[0])!=null?ze:"",uninjectGroupContext:!0,onChange:j},{default:()=>[J.text]})])})]),d("div",{class:`${a}-filters-bottom`},[d(ll,{size:"mini",onClick:D},mt(k=m("table.resetText"))?k:{default:()=>[k]}),d(ll,{type:"primary",size:"mini",onClick:N},mt(ae=m("table.okText"))?ae:{default:()=>[ae]})])])},ee=()=>{const{filterable:P}=e.column;return P?d(Kn,le({popupVisible:T.value,trigger:"click",autoFitPosition:!0,popupOffset:c.value?4:0,onPopupVisibleChange:$},P.triggerProps),{default:()=>[d(Bn,{class:[`${a}-filters`,{[`${a}-filters-active`]:p.value,[`${a}-filters-open`]:T.value,[`${a}-filters-align-left`]:c.value}],disabled:!c.value,onClick:F=>F.stopPropagation()},{default:()=>{var F,A,K,q,k;return[(k=(q=(A=(F=e.column.slots)==null?void 0:F["filter-icon"])==null?void 0:A.call(F))!=null?q:(K=P.icon)==null?void 0:K.call(P))!=null?k:d(jn,null,null)]}})],content:_e}):null},Le=g(()=>{var P,F;const A=[`${a}-cell`,`${a}-cell-align-${(F=(P=e.column)==null?void 0:P.align)!=null?F:e.column.children?"center":"left"}`];return u.value&&A.push(`${a}-cell-with-sorter`,{[`${a}-cell-next-ascend`]:x.value==="ascend",[`${a}-cell-next-descend`]:x.value==="descend"}),c.value&&A.push(`${a}-cell-with-filter`),A}),Q=()=>{var P,F,A,K,q,k;return t.default?t.default():((P=e.column)==null?void 0:P.titleSlotName)&&((F=o.slots)==null?void 0:F[e.column.titleSlotName])?(K=(A=o.slots)[e.column.titleSlotName])==null?void 0:K.call(A,{column:e.column}):(k=(q=e.column)==null?void 0:q.slots)!=null&&k.title?e.column.slots.title():H(e.column.title)?e.column.title():e.column.title},he=()=>{var P,F,A;let K;return d("span",{class:Le.value,onClick:u.value?w:void 0},[((P=e.column)==null?void 0:P.ellipsis)&&((F=e.column)==null?void 0:F.tooltip)?d(El,{class:`${a}-th-title`,tooltipProps:f.value},mt(K=Q())?K:{default:()=>[K]}):d("span",{class:[`${a}-th-title`,{[`${a}-text-ellipsis`]:(A=e.column)==null?void 0:A.ellipsis}]},[Q()]),u.value&&d("span",{class:`${a}-sorter`},[_.value&&d("div",{class:[`${a}-sorter-icon`,{[`${a}-sorter-icon-active`]:y.value==="ascend"}]},[d(Dn,null,null)]),S.value&&d("div",{class:[`${a}-sorter-icon`,{[`${a}-sorter-icon-active`]:y.value==="descend"}]},[d(Ln,null,null)])]),c.value&&ee()])},me=g(()=>{var P,F;return ht(ht(ht({},kl(e.column,{dataColumns:e.dataColumns,operations:e.operations})),(P=e.column)==null?void 0:P.cellStyle),(F=e.column)==null?void 0:F.headerCellStyle)}),V=g(()=>{var P,F;return[`${a}-th`,{[`${a}-col-sorted`]:Boolean(y.value),[`${a}-th-resizing`]:s.value},...Fl(a,e.column),(P=e.column)==null?void 0:P.cellClass,(F=e.column)==null?void 0:F.headerCellClass]}),te=P=>{var F,A,K;(F=e.column)!=null&&F.dataIndex&&((K=o.onThMouseDown)==null||K.call(o,(A=e.column)==null?void 0:A.dataIndex,P))};return()=>{var P,F,A,K;const q=(P=e.column.colSpan)!=null?P:1,k=(F=e.column.rowSpan)!=null?F:1;return d((K=(A=t.th)==null?void 0:A.call(t,{column:e.column})[0])!=null?K:"th",{class:V.value,style:me.value,colspan:q>1?q:void 0,rowspan:k>1?k:void 0},[he(),!c.value&&ee(),e.resizable&&d("span",{class:`${a}-column-handle`,onMousedown:te},null)])}}}),qa=Object.defineProperty,fl=Object.getOwnPropertySymbols,Ha=Object.prototype.hasOwnProperty,Ga=Object.prototype.propertyIsEnumerable,vl=(e,t,l)=>t in e?qa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,yt=(e,t)=>{for(var l in t||(t={}))Ha.call(t,l)&&vl(e,l,t[l]);if(fl)for(var l of fl(t))Ga.call(t,l)&&vl(e,l,t[l]);return e};function Ua(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!tt(e)}var se=Y({name:"Td",props:{rowIndex:Number,record:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})},type:{type:String,default:"normal"},operations:{type:Array,default:()=>[]},dataColumns:{type:Array,default:()=>[]},colSpan:{type:Number,default:1},rowSpan:{type:Number,default:1},isFixedExpand:{type:Boolean,default:!1},containerWidth:{type:Number},showExpandBtn:{type:Boolean,default:!1},indentSize:{type:Number,default:0},renderExpandBtn:{type:Function},summary:{type:Boolean,default:!1}},setup(e,{slots:t}){const l=ve("table"),a=g(()=>{var p;if(Z((p=e.column)==null?void 0:p.tooltip))return e.column.tooltip}),m=g(()=>{var p,v;return((p=e.column)==null?void 0:p.dataIndex)&&((v=_.sorter)==null?void 0:v.field)===e.column.dataIndex}),o=g(()=>{var p;return((p=e.column)==null?void 0:p.dataIndex)&&_.resizingColumn===e.column.dataIndex}),s=()=>{var p,v,I,$,O,R;return e.summary?H((p=e.column)==null?void 0:p.summaryCellClass)?e.column.summaryCellClass((v=e.record)==null?void 0:v.raw):(I=e.column)==null?void 0:I.summaryCellClass:H(($=e.column)==null?void 0:$.bodyCellClass)?e.column.bodyCellClass((O=e.record)==null?void 0:O.raw):(R=e.column)==null?void 0:R.bodyCellClass},f=g(()=>{var p;return[`${l}-td`,{[`${l}-col-sorted`]:m.value,[`${l}-td-resizing`]:o.value},...Fl(l,e.column),(p=e.column)==null?void 0:p.cellClass,s()]}),c=()=>{var p,v,I,$,O,R;return e.summary?H((p=e.column)==null?void 0:p.summaryCellStyle)?e.column.summaryCellStyle((v=e.record)==null?void 0:v.raw):(I=e.column)==null?void 0:I.summaryCellStyle:H(($=e.column)==null?void 0:$.bodyCellStyle)?e.column.bodyCellStyle((O=e.record)==null?void 0:O.raw):(R=e.column)==null?void 0:R.bodyCellStyle},y=g(()=>{var p;const v=kl(e.column,{dataColumns:e.dataColumns,operations:e.operations}),I=c();return yt(yt(yt({},v),(p=e.column)==null?void 0:p.cellStyle),I)}),u=g(()=>{if(e.isFixedExpand&&e.containerWidth)return{width:`${e.containerWidth}px`}}),_=fe(xe,{}),S=()=>{var p,v,I,$,O,R,j,N;if(t.default)return t.default();const D={record:(p=e.record)==null?void 0:p.raw,column:e.column,rowIndex:(v=e.rowIndex)!=null?v:-1};return t.cell?t.cell(D):(I=e.column.slots)!=null&&I.cell?e.column.slots.cell(D):e.column.render?e.column.render(D):e.column.slotName&&(($=_.slots)==null?void 0:$[e.column.slotName])?(R=(O=_.slots)[e.column.slotName])==null?void 0:R.call(O,D):String((N=la((j=e.record)==null?void 0:j.raw,e.column.dataIndex))!=null?N:"")},x=E(!1),w=p=>{var v,I;H(_.loadMore)&&!((v=e.record)!=null&&v.isLeaf)&&!((I=e.record)!=null&&I.children)&&(x.value=!0,new Promise($=>{var O;(O=_.loadMore)==null||O.call(_,e.record.raw,$)}).then($=>{var O;(O=_.addLazyLoadData)==null||O.call(_,$,e.record),x.value=!1})),p.stopPropagation()},T=()=>{var p,v,I,$,O,R;let j;return d("span",{class:[`${l}-cell`,`${l}-cell-align-${(v=(p=e.column)==null?void 0:p.align)!=null?v:"left"}`,{[`${l}-cell-fixed-expand`]:e.isFixedExpand,[`${l}-cell-expand-icon`]:e.showExpandBtn}],style:u.value},[e.indentSize>0&&d("span",{style:{paddingLeft:`${e.indentSize}px`}},null),e.showExpandBtn&&d("span",{class:`${l}-cell-inline-icon`,onClick:w},[x.value?d(zn,null,null):(I=e.renderExpandBtn)==null?void 0:I.call(e,e.record,!1)]),(($=e.column)==null?void 0:$.ellipsis)&&((O=e.column)==null?void 0:O.tooltip)?d(El,{class:`${l}-td-content`,tooltipProps:a.value},Ua(j=S())?j:{default:()=>[j]}):d("span",{class:[`${l}-td-content`,{[`${l}-text-ellipsis`]:(R=e.column)==null?void 0:R.ellipsis}]},[S()])])};return()=>{var p,v,I,$;return d(($=(I=t.td)==null?void 0:I.call(t,{record:(p=e.record)==null?void 0:p.raw,column:e.column,rowIndex:(v=e.rowIndex)!=null?v:-1})[0])!=null?$:"td",{class:f.value,style:y.value,rowspan:e.rowSpan>1?e.rowSpan:void 0,colspan:e.colSpan>1?e.colSpan:void 0},[T()])}}}),Xa=Y({name:"OperationTh",props:{operationColumn:{type:Object,required:!0},operations:{type:Array,required:!0},rowSpan:{type:Number,default:1},selectAll:{type:Boolean,default:!1}},setup(e){const t=ve("table"),l=fe(xe,{}),a=g(()=>{var f,c,y,u;let _=!1,S=!1;const x=(c=(f=l.currentSelectedRowKeys)==null?void 0:f.length)!=null?c:0,w=(u=(y=l.currentAllEnabledRowKeys)==null?void 0:y.length)!=null?u:0;return x>0&&(x>=w?_=!0:S=!0),{checked:_,indeterminate:S}}),m=()=>e.selectAll?d(Be,{modelValue:a.value.checked,indeterminate:a.value.indeterminate,uninjectGroupContext:!0,onChange:f=>{var c;(c=l.onSelectAll)==null||c.call(l,f)}},{default:H(e.operationColumn.title)?e.operationColumn.title():e.operationColumn.title}):e.operationColumn.title?H(e.operationColumn.title)?e.operationColumn.title():e.operationColumn.title:null,o=g(()=>Al(e.operationColumn,e.operations)),s=g(()=>[`${t}-th`,`${t}-operation`,{[`${t}-checkbox`]:e.selectAll},...Rl(t,e.operationColumn)]);return()=>d("th",{class:s.value,style:o.value,rowspan:e.rowSpan>1?e.rowSpan:void 0},[d("span",{class:`${t}-cell`},[m()])])}}),hl=Y({name:"OperationTd",components:{Checkbox:Be,Radio:xt,IconPlus:Sl,IconMinus:wl},props:{operationColumn:{type:Object,required:!0},operations:{type:Array,required:!0},record:{type:Object,required:!0},hasExpand:{type:Boolean,default:!1},selectedRowKeys:{type:Array},renderExpandBtn:{type:Function},colSpan:{type:Number,default:1},rowSpan:{type:Number,default:1},summary:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t,slots:l}){const a=ve("table"),m=fe(xe,{}),o=g(()=>Al(e.operationColumn,e.operations)),s=g(()=>[`${a}-td`,`${a}-operation`,{[`${a}-checkbox`]:e.operationColumn.name==="selection-checkbox",[`${a}-radio`]:e.operationColumn.name==="selection-radio",[`${a}-expand`]:e.operationColumn.name==="expand",[`${a}-drag-handle`]:e.operationColumn.name==="drag-handle"},...Rl(a,e.operationColumn)]),f=g(()=>pt(e.record)),c=g(()=>{var u;return Ta((u=m.currentSelectedRowKeys)!=null?u:[],f.value)}),y=()=>{var u,_,S,x,w,T;if(e.summary)return null;if(e.operationColumn.render)return e.operationColumn.render(e.record.raw);if(e.operationColumn.name==="selection-checkbox"){const p=e.record.key;return!m.checkStrictly&&!e.record.isLeaf?d(Be,{modelValue:c.value.checked,indeterminate:c.value.indeterminate,disabled:Boolean(e.record.disabled),uninjectGroupContext:!0,onChange:v=>{var I;return(I=m.onSelectAllLeafs)==null?void 0:I.call(m,e.record,v)},onClick:v=>v.stopPropagation()},null):d(Be,{modelValue:(_=(u=e.selectedRowKeys)==null?void 0:u.includes(p))!=null?_:!1,disabled:Boolean(e.record.disabled),uninjectGroupContext:!0,onChange:v=>{var I;return(I=m.onSelect)==null?void 0:I.call(m,v,e.record)},onClick:v=>v.stopPropagation()},null)}if(e.operationColumn.name==="selection-radio"){const p=e.record.key;return d(xt,{modelValue:(x=(S=e.selectedRowKeys)==null?void 0:S.includes(p))!=null?x:!1,disabled:Boolean(e.record.disabled),uninjectGroupContext:!0,onChange:v=>{var I;return(I=m.onSelect)==null?void 0:I.call(m,v,e.record)},onClick:v=>v.stopPropagation()},null)}return e.operationColumn.name==="expand"?e.hasExpand&&e.renderExpandBtn?e.renderExpandBtn(e.record):null:e.operationColumn.name==="drag-handle"?(T=(w=l["drag-handle-icon"])==null?void 0:w.call(l))!=null?T:d(Wn,null,null):null};return()=>d("td",{class:s.value,style:o.value,rowspan:e.rowSpan>1?e.rowSpan:void 0,colspan:e.colSpan>1?e.colSpan:void 0},[d("span",{class:`${a}-cell`},[y()])])}});const Ya=e=>{const t=g(()=>{if(e.value)return e.value.type==="handle"?"handle":"row"}),l=ce({dragging:!1,sourceKey:"",sourcePath:[],targetPath:[],data:{}}),a=()=>{l.dragging=!1,l.sourceKey="",l.sourcePath=[],l.targetPath=[],l.data={}};return{dragType:t,dragState:l,handleDragStart:(u,_,S,x)=>{if(u.dataTransfer&&(u.dataTransfer.effectAllowed="move",u.target&&u.target.tagName==="TD")){const{parentElement:w}=u.target;w&&w.tagName==="TR"&&u.dataTransfer.setDragImage(w,0,0)}l.dragging=!0,l.sourceKey=_,l.sourcePath=S,l.data=x},handleDragEnter:(u,_)=>{u.dataTransfer&&(u.dataTransfer.dropEffect="move"),l.targetPath=_,u.preventDefault()},handleDragLeave:u=>{},handleDragover:u=>{u.dataTransfer&&(u.dataTransfer.dropEffect="move"),u.preventDefault()},handleDragEnd:u=>{var _;((_=u.dataTransfer)==null?void 0:_.dropEffect)==="none"&&a()},handleDrop:u=>{a(),u.preventDefault()}}},Ja=(e,t)=>{const l=E(""),a=ce({}),m=(f,c)=>{c.preventDefault(),l.value=f,ct(window,"mousemove",s),ct(window,"mouseup",o),ct(window,"contextmenu",o)},o=()=>{l.value="",ft(window,"mousemove",s),ft(window,"mouseup",o),ft(window,"contextmenu",o)},s=f=>{const c=e.value[l.value];if(c){const{clientX:y}=f,{x:u}=c.getBoundingClientRect();let _=Math.ceil(y-u);_<40&&(_=40),a[l.value]=_,t("columnResize",l.value,_)}};return{resizingColumn:l,columnWidth:a,handleThMouseDown:m,handleThMouseUp:o}},Qa=({columns:e,onFilterChange:t})=>{const l=E(Za(e.value)),a=g(()=>{var s,f;const c={};for(const y of e.value)if(y.dataIndex){const u=(f=(s=y.filterable)==null?void 0:s.filteredValue)!=null?f:l.value[y.dataIndex];u&&(c[y.dataIndex]=u)}return c});return{_filters:l,computedFilters:a,resetFilters:s=>{var f;const c=s?[].concat(s):[],y={};for(const u of e.value)if(u.dataIndex&&u.filterable&&(c.length===0||c.includes(u.dataIndex))){const _=(f=u.filterable.defaultFilteredValue)!=null?f:[];y[u.dataIndex]=_,t(u.dataIndex,_)}l.value=y},clearFilters:s=>{const f=s?[].concat(s):[],c={};for(const y of e.value)if(y.dataIndex&&y.filterable&&(f.length===0||f.includes(y.dataIndex))){const u=[];c[y.dataIndex]=u,t(y.dataIndex,u)}l.value=c}}},Za=e=>{var t;const l={};for(const a of e)a.dataIndex&&((t=a.filterable)==null?void 0:t.defaultFilteredValue)&&(l[a.dataIndex]=a.filterable.defaultFilteredValue);return l},er=({columns:e,onSorterChange:t})=>{const l=E(tr(e.value)),a=g(()=>{var s;for(const f of e.value)if(f.dataIndex&&f.sortable){const c=pl(f.sortable.sortOrder)?f.sortable.sortOrder:((s=l.value)==null?void 0:s.field)===f.dataIndex?l.value.direction:"";if(c)return{field:f.dataIndex,direction:c}}});return{_sorter:l,computedSorter:a,resetSorters:()=>{var s;let f;for(const c of e.value)c.dataIndex&&c.sortable&&(!f&&c.sortable.defaultSortOrder&&(f={field:c.dataIndex,direction:c.sortable.defaultSortOrder}),t(c.dataIndex,(s=c.sortable.defaultSortOrder)!=null?s:""));l.value=f},clearSorters:()=>{for(const s of e.value)s.dataIndex&&s.sortable&&t(s.dataIndex,"")}}},tr=e=>{var t;for(const l of e)if(l.dataIndex&&((t=l.sortable)==null?void 0:t.defaultSortOrder))return{field:l.dataIndex,direction:l.sortable.defaultSortOrder}},ml=({spanMethod:e,data:t,columns:l})=>{const a=g(()=>{const o={};return e.value&&t.value.forEach((s,f)=>{l.value.forEach((c,y)=>{var u,_;const{rowspan:S=1,colspan:x=1}=(_=(u=e.value)==null?void 0:u.call(e,{record:s.raw,column:c,rowIndex:f,columnIndex:y}))!=null?_:{};(S>1||x>1)&&(o[`${f}-${y}`]=[S,x])})}),o}),m=g(()=>{const o=[];for(const s of Object.keys(a.value)){const f=s.split("-").map(y=>Number(y)),c=a.value[s];for(let y=1;y<c[0];y++){o.push(`${f[0]+y}-${f[1]}`);for(let u=1;u<c[1];u++)o.push(`${f[0]+y}-${f[1]+u}`)}for(let y=1;y<c[1];y++)o.push(`${f[0]}-${f[1]+y}`)}return o});return{tableSpan:a,removedCells:m}};var lr=Object.defineProperty,nr=Object.defineProperties,ar=Object.getOwnPropertyDescriptors,yl=Object.getOwnPropertySymbols,rr=Object.prototype.hasOwnProperty,or=Object.prototype.propertyIsEnumerable,gl=(e,t,l)=>t in e?lr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,Je=(e,t)=>{for(var l in t||(t={}))rr.call(t,l)&&gl(e,l,t[l]);if(yl)for(var l of yl(t))or.call(t,l)&&gl(e,l,t[l]);return e},bl=(e,t)=>nr(e,ar(t));function ur(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!tt(e)}const xl={wrapper:!0,cell:!1,headerCell:!1,bodyCell:!1};var gt=Y({name:"Table",props:{columns:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]},bordered:{type:[Boolean,Object],default:!0},hoverable:{type:Boolean,default:!0},stripe:{type:Boolean,default:!1},size:{type:String,default:()=>{var e,t;return(t=(e=fe(Mn,void 0))==null?void 0:e.size)!=null?t:"large"}},tableLayoutFixed:{type:Boolean,default:!1},loading:{type:[Boolean,Object],default:!1},rowSelection:{type:Object},expandable:{type:Object},scroll:{type:Object},pagination:{type:[Boolean,Object],default:!0},pagePosition:{type:String,default:"br"},indentSize:{type:Number,default:16},rowKey:{type:String,default:"key"},showHeader:{type:Boolean,default:!0},virtualListProps:{type:Object},spanMethod:{type:Function},spanAll:{type:Boolean,default:!1},components:{type:Object},loadMore:{type:Function},filterIconAlignLeft:{type:Boolean,default:!1},hideExpandButtonOnEmpty:{type:Boolean,default:!1},rowClass:{type:[String,Array,Object,Function]},draggable:{type:Object},rowNumber:{type:[Boolean,Object]},columnResizable:{type:Boolean},summary:{type:[Boolean,Function]},summaryText:{type:String,default:"Summary"},summarySpanMethod:{type:Function},selectedKeys:{type:Array},defaultSelectedKeys:{type:Array},expandedKeys:{type:Array},defaultExpandedKeys:{type:Array},defaultExpandAllRows:{type:Boolean,default:!1},stickyHeader:{type:[Boolean,Number],default:!1}},emits:{"update:selectedKeys":e=>!0,"update:expandedKeys":e=>!0,expand:(e,t)=>!0,expandedChange:e=>!0,select:(e,t,l)=>!0,selectAll:e=>!0,selectionChange:e=>!0,sorterChange:(e,t)=>!0,filterChange:(e,t)=>!0,pageChange:e=>!0,pageSizeChange:e=>!0,change:(e,t)=>!0,cellClick:(e,t,l)=>!0,rowClick:(e,t)=>!0,headerClick:(e,t)=>!0,columnResize:(e,t)=>!0},setup(e,{emit:t,slots:l}){const{columns:a,rowKey:m,rowSelection:o,expandable:s,loadMore:f,filterIconAlignLeft:c,selectedKeys:y,defaultSelectedKeys:u,expandedKeys:_,defaultExpandedKeys:S,defaultExpandAllRows:x,spanMethod:w,draggable:T,summarySpanMethod:p}=_t(e),v=ve("table"),I=g(()=>Z(e.bordered)?Je(Je({},xl),e.bordered):bl(Je({},xl),{wrapper:e.bordered})),{children:$,components:O}=Ol("TableColumn"),R=g(()=>{var n,r;return(r=(n=o.value)==null?void 0:n.checkStrictly)!=null?r:!0}),j=g(()=>{var n,r,i,h;const b=Boolean(((n=e.scroll)==null?void 0:n.x)||((r=e.scroll)==null?void 0:r.minWidth)),C=Boolean(((i=e.scroll)==null?void 0:i.y)||((h=e.scroll)==null?void 0:h.maxHeight));return{x:b,y:C}}),N=E(),D=E({}),{componentRef:_e,elementRef:ee}=Xe("containerRef"),{componentRef:Le,elementRef:Q}=Xe("containerRef"),{componentRef:he,elementRef:me}=Xe("viewportRef"),{componentRef:V,elementRef:te}=Xe("containerRef"),P=g(()=>F.value?He.value?me.value:Q.value:ee.value),F=g(()=>j.value.y||e.stickyHeader||He.value||j.value.x&&M.value.length===0),A=ce(new Map),K=E();be([O,A],([n,r])=>{if(n.length>0){const i=[];n.forEach(h=>{const b=r.get(h);b&&i.push(b)}),K.value=i}else K.value=void 0});const q=new Map,k=E([]),ae=E([]);be([a,K],([n,r])=>{var i;const h=Ra((i=r!=null?r:n)!=null?i:[],q);k.value=h.dataColumns,ae.value=h.groupColumns},{immediate:!0,deep:!0});const G=g(()=>["tl","top","tr"].includes(e.pagePosition)),J=E(!1),re=E(!1);Nn(()=>{var n,r,i;let h=!1,b=!1;(((n=e.rowSelection)==null?void 0:n.fixed)||((r=e.expandable)==null?void 0:r.fixed)||((i=e.draggable)==null?void 0:i.fixed))&&(h=!0);for(const C of k.value)C.fixed==="left"?h=!0:C.fixed==="right"&&(b=!0);h!==J.value&&(J.value=h),b!==re.value&&(re.value=b)});const ze=g(()=>{for(const n of k.value)if(n.ellipsis)return!0;return!1}),Ce=n=>{const r={type:n,page:pe.value,pageSize:$e.value,sorter:Se.value,filters:ye.value,dragTarget:n==="drag"?oe.data:void 0};t("change",Et.value,r)},$t=(n,r)=>{Tl.value=bl(Je({},ye.value),{[n]:r}),t("filterChange",n,r),Ce("filter")},Ot=(n,r)=>{Kl.value=r?{field:n,direction:r}:void 0,t("sorterChange",n,r),Ce("sorter")},{_filters:Tl,computedFilters:ye,resetFilters:Bl,clearFilters:jl}=Qa({columns:k,onFilterChange:$t}),{_sorter:Kl,computedSorter:Se,resetSorters:Dl,clearSorters:Ll}=er({columns:k,onSorterChange:Ot}),It=new Set,zl=g(()=>{const n=[];It.clear();const r=i=>{if(je(i)&&i.length>0)for(const h of i)n.push(h[m.value]),h.disabled&&It.add(h[m.value]),h.children&&r(h.children)};return r(e.data),n}),Wl=g(()=>{const n=[],r=i=>{for(const h of i)n.push(h.key),h.children&&r(h.children)};return r(M.value),n}),Pt=g(()=>{const n=[],r=i=>{for(const h of i)h.disabled||n.push(h.key),h.children&&r(h.children)};return r(M.value),n}),{isRadio:ir,selectedRowKeys:Ml,currentSelectedRowKeys:Rt,handleSelect:Nl,handleSelectAllLeafs:Vl,handleSelectAll:ql,select:Hl,selectAll:Gl,clearSelected:Ul}=Ba({selectedKeys:y,defaultSelectedKeys:u,rowSelection:o,currentAllRowKeys:Wl,currentAllEnabledRowKeys:Pt,emit:t}),{expandedRowKeys:Ft,handleExpand:Xl,expand:Yl,expandAll:Jl}=ja({expandedKeys:_,defaultExpandedKeys:S,defaultExpandAllRows:x,expandable:s,allRowKeys:zl,emit:t}),nt=ce({}),Ql=(n,r)=>{n&&(nt[r.key]=n)},Zl=n=>{var r,i;for(const h of Object.keys(ye.value)){const b=ye.value[h],C=q.get(h);if(C&&((r=C.filterable)==null?void 0:r.filter)&&b.length>0){const B=(i=C.filterable)==null?void 0:i.filter(b,n.raw);if(!B)return B}}return!0},{dragType:we,dragState:oe,handleDragStart:en,handleDragEnter:tn,handleDragLeave:dr,handleDragover:ln,handleDragEnd:nn,handleDrop:an}=Ya(T),{resizingColumn:rn,columnWidth:We,handleThMouseDown:on}=Ja(D,t),kt=g(()=>{var n;const r=i=>{const h=[];for(const b of i){const C={raw:b,key:b[e.rowKey],disabled:b.disabled,expand:b.expand,isLeaf:b.isLeaf};b.children?(C.isLeaf=!1,C.children=r(b.children)):e.loadMore&&!b.isLeaf?(C.isLeaf=!1,nt[C.key]&&(C.children=r(nt[C.key]))):C.isLeaf=!0,C.hasSubtree=Boolean(C.children?e.hideExpandButtonOnEmpty?C.children.length>0:!0:e.loadMore&&!C.isLeaf),h.push(C)}return h};return r((n=e.data)!=null?n:[])}),At=g(()=>{const n=r=>r.filter(i=>Zl(i)?(i.children&&(i.children=n(i.children)),!0):!1);return Object.keys(ye.value).length>0?n(kt.value):kt.value}),at=g(()=>{var n,r;const i=[...At.value];if(i.length>0){if((n=Se.value)!=null&&n.field){const h=q.get(Se.value.field);if(h&&((r=h.sortable)==null?void 0:r.sorter)!==!0){const{field:b,direction:C}=Se.value;i.sort((B,z)=>{var U;const ue=B.raw[b],Ue=z.raw[b];if(((U=h.sortable)==null?void 0:U.sorter)&&H(h.sortable.sorter))return h.sortable.sorter(B.raw,z.raw,{dataIndex:b,direction:C});const Ie=ue>Ue?1:-1;return C==="descend"?-Ie:Ie})}}if(oe.dragging&&oe.targetPath.length>0){const h=ul(i,oe.sourcePath);ul(i,oe.targetPath,h)}}return i}),{page:pe,pageSize:$e,handlePageChange:un,handlePageSizeChange:dn}=Ka(e,t),sn=g(()=>{var n,r;return(r=(n=o.value)==null?void 0:n.onlyCurrent)!=null?r:!1});be(pe,(n,r)=>{n!==r&&sn.value&&Ul()});const M=g(()=>e.pagination&&at.value.length>$e.value?at.value.slice((pe.value-1)*$e.value,pe.value*$e.value):at.value),Et=g(()=>M.value.map(n=>n.raw)),cn=()=>k.value.reduce((n,r,i)=>{if(r.dataIndex)if(i===0)n[r.dataIndex]=e.summaryText;else{let h=0,b=!1;M.value.forEach(C=>{r.dataIndex&&(de(C.raw[r.dataIndex])?h+=C.raw[r.dataIndex]:!Ee(C.raw[r.dataIndex])&&!_l(C.raw[r.dataIndex])&&(b=!0))}),n[r.dataIndex]=b?"":h}return n},{}),Tt=n=>{if(n&&n.length>0)return n.map(r=>({raw:r,key:r[e.rowKey]}))},ge=g(()=>{if(e.summary)return H(e.summary)?Tt(e.summary({columns:k.value,data:Et.value})):Tt([cn()])}),Me=E(0),Ne=E(!0),Ve=E(!0),rt=()=>{let n=!0,r=!0;const i=P.value;i&&(n=Me.value===0,r=Math.ceil(Me.value+i.offsetWidth)>=i.scrollWidth),n!==Ne.value&&(Ne.value=n),r!==Ve.value&&(Ve.value=r)},fn=()=>Ne.value&&Ve.value?`${v}-scroll-position-both`:Ne.value?`${v}-scroll-position-left`:Ve.value?`${v}-scroll-position-right`:`${v}-scroll-position-middle`,vn=()=>{const n=[];return J.value&&n.push(`${v}-has-fixed-col-left`),re.value&&n.push(`${v}-has-fixed-col-right`),n},Bt=n=>{n.target.scrollLeft!==Me.value&&(Me.value=n.target.scrollLeft),rt()},jt=n=>{Bt(n);const{scrollLeft:r}=n.target;te.value&&(te.value.scrollLeft=r),N.value&&(N.value.scrollLeft=r)},Kt=(n,r)=>{t("rowClick",n.raw,r)},Dt=(n,r,i)=>{t("cellClick",n.raw,r,i)},hn=(n,r)=>{t("headerClick",n,r)},L=g(()=>{var n,r;const i=[],h=J.value||re.value;let b,C,B;((n=e.draggable)==null?void 0:n.type)==="handle"&&(b={name:"drag-handle",title:e.draggable.title,width:e.draggable.width,fixed:e.draggable.fixed||h},i.push(b)),e.expandable&&(C={name:"expand",title:e.expandable.title,width:e.expandable.width,fixed:e.expandable.fixed||h},i.push(C)),e.rowSelection&&(B={name:e.rowSelection.type==="radio"?"selection-radio":"selection-checkbox",title:e.rowSelection.title,width:e.rowSelection.width,fixed:e.rowSelection.fixed||h},i.push(B));const z=(r=e.components)==null?void 0:r.operations;return H(z)?z({dragHandle:b,expand:C,selection:B}):i}),mn=g(()=>{var n,r,i,h;if(j.value.x){const b={width:de((n=e.scroll)==null?void 0:n.x)?`${(r=e.scroll)==null?void 0:r.x}px`:(i=e.scroll)==null?void 0:i.x};return(h=e.scroll)!=null&&h.minWidth&&(b.minWidth=de(e.scroll.minWidth)?`${e.scroll.minWidth}px`:e.scroll.minWidth),b}}),qe=g(()=>{var n,r,i,h;if(j.value.x&&M.value.length>0){const b={width:de((n=e.scroll)==null?void 0:n.x)?`${(r=e.scroll)==null?void 0:r.x}px`:(i=e.scroll)==null?void 0:i.x};return(h=e.scroll)!=null&&h.minWidth&&(b.minWidth=de(e.scroll.minWidth)?`${e.scroll.minWidth}px`:e.scroll.minWidth),b}});$l(xe,ce({loadMore:f,addLazyLoadData:Ql,slots:l,sorter:Se,filters:ye,filterIconAlignLeft:c,resizingColumn:rn,checkStrictly:R,currentAllEnabledRowKeys:Pt,currentSelectedRowKeys:Rt,addColumn:(n,r)=>{A.set(n,r)},removeColumn:n=>{A.delete(n)},onSelectAll:ql,onSelect:Nl,onSelectAllLeafs:Vl,onSorterChange:Ot,onFilterChange:$t,onThMouseDown:on}));const Lt=g(()=>[v,`${v}-size-${e.size}`,{[`${v}-border`]:I.value.wrapper,[`${v}-border-cell`]:I.value.cell,[`${v}-border-header-cell`]:!I.value.cell&&I.value.headerCell,[`${v}-border-body-cell`]:!I.value.cell&&I.value.bodyCell,[`${v}-stripe`]:e.stripe,[`${v}-hover`]:e.hoverable,[`${v}-dragging`]:oe.dragging,[`${v}-type-selection`]:Boolean(e.rowSelection),[`${v}-empty`]:e.data&&M.value.length===0,[`${v}-layout-fixed`]:e.tableLayoutFixed||j.value.x||F.value||ze.value}]),yn=g(()=>[`${v}-pagination`,{[`${v}-pagination-left`]:e.pagePosition==="tl"||e.pagePosition==="bl",[`${v}-pagination-center`]:e.pagePosition==="top"||e.pagePosition==="bottom",[`${v}-pagination-right`]:e.pagePosition==="tr"||e.pagePosition==="br",[`${v}-pagination-top`]:G.value}]),gn=g(()=>{const n=vn();return j.value.x&&n.push(fn()),F.value&&n.push(`${v}-scroll-y`),n}),He=g(()=>Boolean(e.virtualListProps)),ot=E({}),zt=()=>{const n={};for(const r of Object.keys(D.value))n[r]=D.value[r].offsetWidth;ot.value=n},Oe=E(!1),Wt=()=>Q.value?Q.value.offsetWidth>Q.value.clientWidth:!1,bn=()=>{const n=Wt();Oe.value!==n&&(Oe.value=n),rt(),zt()};Cl(()=>{Oe.value=Wt(),zt()});const xn=g(()=>Z(e.loading)?e.loading:{loading:e.loading}),_n=()=>d(ne,{empty:!0},{default:()=>[d(se,{colSpan:k.value.length+L.value.length},{default:()=>{var n,r;return[(r=(n=l.empty)==null?void 0:n.call(l))!=null?r:d(qn,null,null)]}})]}),Cn=n=>{var r;if(n.expand)return H(n.expand)?n.expand():n.expand;if(l["expand-row"])return l["expand-row"]({record:n.raw});if((r=e.expandable)!=null&&r.expandedRowRender)return e.expandable.expandedRowRender(n.raw)},Mt=g(()=>[].concat(L.value,k.value)),Sn=g(()=>e.spanAll?Mt.value:k.value),{tableSpan:Nt,removedCells:Vt}=ml({spanMethod:w,data:M,columns:Sn}),{tableSpan:qt,removedCells:Ht}=ml({spanMethod:p,data:M,columns:Mt}),Ge=n=>{if(!(!He.value||!n||!ot.value[n]))return{width:`${ot.value[n]}px`}},wn=(n,r)=>d(ne,{key:`table-summary-${r}`,class:[`${v}-tr-summary`,H(e.rowClass)?e.rowClass(n,r):e.rowClass],onClick:i=>Kt(n,i)},{default:()=>[L.value.map((i,h)=>{var b;const C=`${r}-${h}`,[B,z]=(b=qt.value[C])!=null?b:[1,1];if(Ht.value.includes(C))return null;const U=Ge(i.name);return d(hl,{style:U,operationColumn:i,operations:L.value,record:n,rowSpan:B,colSpan:z,summary:!0},null)}),k.value.map((i,h)=>{var b;const C=`${r}-${L.value.length+h}`,[B,z]=(b=qt.value[C])!=null?b:[1,1];if(Ht.value.includes(C))return null;const U=Ge(i.dataIndex);return d(se,{key:`td-${C}`,style:U,rowIndex:r,record:n,column:i,operations:L.value,dataColumns:k.value,rowSpan:B,colSpan:z,summary:!0,onClick:ue=>Dt(n,i,ue)},{td:l.td,cell:l["summary-cell"]})})],tr:l.tr}),Gt=()=>ge.value?d("tfoot",null,[ge.value.map((n,r)=>wn(n,r))]):null,Ut=(n,r=!0)=>{var i,h,b,C,B;const z=n.key,U=Ft.value.includes(z);return d("button",{type:"button",class:`${v}-expand-btn`,onClick:ue=>{Xl(z,n.raw),r&&ue.stopPropagation()}},[(B=(C=(i=l["expand-icon"])==null?void 0:i.call(l,{expanded:U,record:n.raw}))!=null?C:(b=(h=e.expandable)==null?void 0:h.icon)==null?void 0:b.call(h,U,n.raw))!=null?B:U?d(wl,null,null):d(Sl,null,null)])},pn=(n,{indentSize:r,indexPath:i,allowDrag:h,expandContent:b})=>{var C;if(n.hasSubtree)return(C=n.children)==null?void 0:C.map((B,z)=>ut(B,z,{indentSize:r,indexPath:i,allowDrag:h}));if(b){const B=P.value;return d(ne,{key:`${n.key}-expand`,expand:!0},{default:()=>[d(se,{isFixedExpand:J.value||re.value,containerWidth:B==null?void 0:B.clientWidth,colSpan:k.value.length+L.value.length},ur(b)?b:{default:()=>[b]})]})}return null},ut=(n,r,{indentSize:i=0,indexPath:h,allowDrag:b=!0}={})=>{var C;const B=n.key,z=(h!=null?h:[]).concat(r),U=Cn(n),ue=Ft.value.includes(B),Ue=oe.sourceKey===n.key,Ie=we.value?{draggable:b,onDragstart:W=>{!b||en(W,n.key,z,n.raw)},onDragend:W=>{!b||nn(W)}}:{},In=we.value?{onDragenter:W=>{!b||tn(W,z)},onDragover:W=>{!b||ln(W)},onDrop:W=>{!b||(Ce("drag"),an(W))}}:{};return d(Te,null,[d(ne,le({key:B,class:[{[`${v}-tr-draggable`]:we.value==="row",[`${v}-tr-drag`]:Ue},H(e.rowClass)?e.rowClass(n,r):e.rowClass],rowIndex:r,record:n,checked:(C=Ml.value)==null?void 0:C.includes(B),onClick:W=>Kt(n,W)},we.value==="row"?Ie:{},In),{default:()=>[L.value.map((W,ie)=>{var Pe;const Re=`${r}-${ie}`,[it,dt]=e.spanAll?(Pe=Nt.value[Re])!=null?Pe:[1,1]:[1,1];if(e.spanAll&&Vt.value.includes(Re))return null;const st=Ge(W.name);return d(hl,le({key:`operation-td-${ie}`,style:st,operationColumn:W,operations:L.value,record:n,hasExpand:Boolean(U),selectedRowKeys:Rt.value,rowSpan:it,colSpan:dt,renderExpandBtn:Ut},we.value==="handle"?Ie:{}),{"drag-handle-icon":l["drag-handle-icon"]})}),k.value.map((W,ie)=>{var Pe;const Re=`${r}-${e.spanAll?L.value.length+ie:ie}`,[it,dt]=(Pe=Nt.value[Re])!=null?Pe:[1,1];if(Vt.value.includes(Re))return null;const st=ie===0?{showExpandBtn:n.hasSubtree,indentSize:n.hasSubtree?i-20:i}:{},Pn=Ge(W.dataIndex);return d(se,le({key:`td-${ie}`,style:Pn,rowIndex:r,record:n,column:W,operations:L.value,dataColumns:k.value,rowSpan:it,renderExpandBtn:Ut,colSpan:dt},st,{onClick:Rn=>Dt(n,W,Rn)}),{td:l.td})})],tr:l.tr}),ue&&pn(n,{indentSize:i+e.indentSize,indexPath:z,allowDrag:b&&!Ue,expandContent:U})])},Xt=()=>{const n=M.value.some(r=>Boolean(r.hasSubtree));return d(Ze,null,{default:()=>[M.value.length>0?M.value.map((r,i)=>ut(r,i,{indentSize:n?20:0})):_n()],tbody:l.tbody})},Yt=()=>d(Qe,null,{default:()=>[ae.value.map((n,r)=>d(ne,{key:`header-row-${r}`},{default:()=>[r===0&&L.value.map((i,h)=>{var b;return d(Xa,{key:`operation-th-${h}`,ref:C=>{(C==null?void 0:C.$el)&&i.name&&(D.value[i.name]=C.$el)},operationColumn:i,operations:L.value,selectAll:Boolean(i.name==="selection-checkbox"&&((b=e.rowSelection)==null?void 0:b.showCheckedAll)),rowSpan:ae.value.length},null)}),n.map((i,h)=>{const b=e.columnResizable&&Boolean(i.dataIndex)&&h<n.length-1;return d(et,{key:`th-${h}`,ref:C=>{(C==null?void 0:C.$el)&&i.dataIndex&&(D.value[i.dataIndex]=C.$el)},column:i,operations:L.value,dataColumns:k.value,resizable:b,onClick:C=>hn(i,C)},{th:l.th})})]}))],thead:l.thead}),$n=()=>{if(F.value){const n={};return Oe.value&&(n.overflowY="scroll"),de(e.stickyHeader)&&(n.top=`${e.stickyHeader}px`),d(Te,null,[e.showHeader&&d(vt,{ref:V,class:[`${v}-header`,{[`${v}-header-sticky`]:e.stickyHeader}],style:n,hide:M.value.length!==0},{default:()=>[d("table",{class:`${v}-element`,style:mn.value,cellpadding:0,cellspacing:0},[d(Ye,{dataColumns:k.value,operations:L.value,columnWidth:We},null),Yt()])]}),d(nl,{onResize:bn},{default:()=>{var r,i;return[He.value?d(ea,le({ref:h=>{h!=null&&h.$el&&(Q.value=h.$el)},class:`${v}-body`,data:M.value,itemKey:"_key",component:{list:"table",content:"tbody"},listAttrs:{class:`${v}-element`,style:qe.value},paddingPosition:"list"},e.virtualListProps,{onScroll:jt}),{item:({item:h,index:b})=>ut(h,b)}):d(vt,{ref:Le,class:`${v}-body`,style:{maxHeight:de((r=e.scroll)==null?void 0:r.y)?`${(i=e.scroll)==null?void 0:i.y}px`:"100%"},outerStyle:{display:"flex",minHeight:"0"},onScroll:jt},{default:()=>[d("table",{class:`${v}-element`,style:qe.value,cellpadding:0,cellspacing:0},[M.value.length!==0&&d(Ye,{dataColumns:k.value,operations:L.value,columnWidth:We},null),Xt()])]})]}}),ge.value&&ge.value.length&&d("div",{ref:N,class:`${v}-tfoot`,style:{overflowY:Oe.value?"scroll":"hidden"}},[d("table",{class:`${v}-element`,style:qe.value,cellpadding:0,cellspacing:0},[d(Ye,{dataColumns:k.value,operations:L.value,columnWidth:We},null),Gt()])])])}return d(nl,{onResize:()=>rt()},{default:()=>[d("table",{class:`${v}-element`,cellpadding:0,cellspacing:0,style:qe.value},[d(Ye,{dataColumns:k.value,operations:L.value,columnWidth:We},null),e.showHeader&&Yt(),Xt(),ge.value&&ge.value.length&&Gt()])]})},Jt=n=>{var r;const i=(r=e.scroll)!=null&&r.maxHeight?{maxHeight:e.scroll.maxHeight}:void 0;return d(Te,null,[d("div",{class:[`${v}-container`,gn.value]},[d(vt,{ref:_e,class:[`${v}-content`,{[`${v}-content-scroll-x`]:!F.value}],style:i,outerStyle:{height:"100%"},onScroll:Bt},{default:()=>[n?d("table",{class:`${v}-element`,cellpadding:0,cellspacing:0},[n()]):$n()]})]),l.footer&&d("div",{class:`${v}-footer`},[l.footer()])])},Qt=()=>{var n,r;const i=Z(e.pagination)?Vn(e.pagination,["current","pageSize","defaultCurrent","defaultPageSize"]):{};return d("div",{class:yn.value},[(n=l["pagination-left"])==null?void 0:n.call(l),d(Zn,le({total:At.value.length,current:pe.value,pageSize:$e.value,onChange:h=>{un(h),Ce("pagination")},onPageSizeChange:h=>{dn(h),Ce("pagination")}},i),null),(r=l["pagination-right"])==null?void 0:r.call(l)])},On=g(()=>{var n,r;if(pl((n=e.scroll)==null?void 0:n.y))return{height:(r=e.scroll)==null?void 0:r.y}});return{render:()=>{var n;return l.default?d("div",{class:Lt.value},[Jt(l.default)]):($.value=(n=l.columns)==null?void 0:n.call(l),d("div",{class:Lt.value,style:On.value},[$.value,d(Jn,xn.value,{default:()=>[e.pagination!==!1&&M.value.length>0&&G.value&&Qt(),Jt(),e.pagination!==!1&&M.value.length>0&&!G.value&&Qt()]})]))},selfExpand:Yl,selfExpandAll:Jl,selfSelect:Hl,selfSelectAll:Gl,selfResetFilters:Bl,selfClearFilters:jl,selfResetSorters:Dl,selfClearSorters:Ll}},methods:{selectAll(e){return this.selfSelectAll(e)},select(e,t){return this.selfSelect(e,t)},expandAll(e){return this.selfExpandAll(e)},expand(e,t){return this.selfExpand(e,t)},resetFilters(e){return this.selfResetFilters(e)},clearFilters(e){return this.selfClearFilters(e)},resetSorters(){return this.selfResetSorters()},clearSorters(){return this.selfClearSorters()}},render(){return this.render()}});const X=(e,t)=>{const l=Hn(e,t),a=E(l.value);return be(l,(m,o)=>{ta(m,o)||(a.value=m)}),a};var bt=Y({name:"TableColumn",props:{dataIndex:String,title:String,width:Number,align:{type:String},fixed:{type:String},ellipsis:{type:Boolean,default:!1},sortable:{type:Object,default:void 0},filterable:{type:Object,default:void 0},cellClass:{type:[String,Array,Object]},headerCellClass:{type:[String,Array,Object]},bodyCellClass:{type:[String,Array,Object,Function]},summaryCellClass:{type:[String,Array,Object,Function]},cellStyle:{type:Object},headerCellStyle:{type:Object},bodyCellStyle:{type:[Object,Function]},summaryCellStyle:{type:[Object,Function]},index:{type:Number},tooltip:{type:[Boolean,Object],default:!1}},setup(e,{slots:t}){var l;const{dataIndex:a,title:m,width:o,align:s,fixed:f,ellipsis:c,index:y}=_t(e),u=X(e,"sortable"),_=X(e,"filterable"),S=X(e,"cellClass"),x=X(e,"headerCellClass"),w=X(e,"bodyCellClass"),T=X(e,"summaryCellClass"),p=X(e,"cellStyle"),v=X(e,"headerCellStyle"),I=X(e,"bodyCellStyle"),$=X(e,"summaryCellStyle"),O=X(e,"tooltip"),R=Un(),j=fe(xe,{}),N=fe(il,void 0),{children:D,components:_e}=Ol("TableColumn"),ee=ce(new Map);$l(il,{addChild:(V,te)=>{ee.set(V,te)},removeChild:V=>{ee.delete(V)}});const he=E();be([_e,ee],([V,te])=>{if(V.length>0){const P=[];V.forEach(F=>{const A=te.get(F);A&&P.push(A)}),he.value=P}else he.value=void 0});const me=ce({dataIndex:a,title:m,width:o,align:s,fixed:f,ellipsis:c,sortable:u,filterable:_,cellClass:S,headerCellClass:x,bodyCellClass:w,summaryCellClass:T,cellStyle:p,headerCellStyle:v,bodyCellStyle:I,summaryCellStyle:$,index:y,tooltip:O,children:he,slots:t});return R&&(N?N.addChild(R.uid,me):(l=j.addColumn)==null||l.call(j,R.uid,me)),Gn(()=>{var V;R&&(N?N.removeChild(R.uid):(V=j.removeColumn)==null||V.call(j,R.uid))}),()=>{var V;return D.value=(V=t.default)==null?void 0:V.call(t),D.value}}});const xr=Object.assign(gt,{Thead:Qe,Tbody:Ze,Tr:ne,Th:et,Td:se,Column:bt,install:(e,t)=>{Xn(e,t);const l=Yn(t);e.component(l+gt.name,gt),e.component(l+Qe.name,Qe),e.component(l+Ze.name,Ze),e.component(l+ne.name,ne),e.component(l+et.name,et),e.component(l+se.name,se),e.component(l+bt.name,bt)}});export{St as T,xr as a,bt as b};
